<!DOCTYPE html>
<html>
  <head>
    <title>UAE ACC MAP_V26</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
       html,
       body {
         margin: 0;
         padding: 0;
         overflow: hidden;
         height: 100%;
         width: 100%;
       }
       #map {
         height: 100vh;
         width: 100vw;
         background-color: #374b57; //screen backgroud
       }
       
       /* fixes name labels styling*/
       .coord-label {
         background: none !important;
         border: none !important;
         box-shadow: none !important;
         padding: 0 !important;
         margin: 0 !important;
         color: white;
         font-size: 9px;
         font-family: 'Roboto', calibri-light;
         font-weight: light; /* Thinner font */
         text-align: center;
         opacity: 0.5;
       }
       .coord-label::before {
         display: none !important;
       }

       /* airway name labels styling*/
       .airway-label {
         background-color: rgba(55, 65, 75, 0.9) !important;
         //background: transparent !important;
         border: none !important;
         padding: 2px !important;
         margin: 0px !important;
         box-shadow: none !important;
         font-size: 12px;
         //font-family: 'Roboto', calibri-light;
         font-weight: bold;
         color: yellow !important;
         text-shadow: none !important;
         line-height: 1;
       }

       /* Menu bar styling */
       .map-menu-bar {
         position: absolute;
         top: 1px;
         left: 3px;
         z-index: 1001;
         display: flex;
         gap: 5px;
         padding: 2px;
         background: rgba(95, 110, 120, 0.9);
         //border: 1px solid #888;
         border-radius: 8px;
        }

       /* menu button styling (flat look) */
       .map-btn {
         padding: 6px 10px;
         font-size: 12px;
         color: white;
         cursor: pointer;
         height: 28px;
         width: 97px;
         min-width: 65px;
         background: transparent; /* Remove background */
         border-color:grey;
         border: 1px solid #888;
         //border: none; /* Remove border */
         border-radius: 8px; /* Remove individual rounding */
       }

      /* danger Areas button with submenu */
       .map-btn-panel {
         position: relative;
         display: inline-flex;
         flex-direction: column;
       }

       .areas-checkboxes {
         display: none;
         position: absolute;
         top: 108%;
         left: 0;
         width: 87px;
         background: rgba(95, 110, 120, 0.9);
         color: white;
         padding: 5px;
         margin-top: 1px;
         border-radius: 6px;
         box-shadow: 0 0 6px rgba(0, 0, 0, 0.3);
         font-size: 11px;
         font-family: sans-serif;
         z-index: 1002;
       }

       .areas-checkboxes label {
         display: block;
         margin: 2px 0;
       }

       .map-btn:hover {
         color: yellow;
       }

       /* Show checkboxes when Areas button is active */
       #areasPanel.active .areas-checkboxes {
         display: block;
       }

       /*route pair area styling*/
       #routePanel {
         position: absolute;
         top: 34px;
         left: 3px;
         background: rgba(35, 49, 57, 0.6);
         //border: 1px solid #ccc; //#999;
         border-radius: 8px;
         padding: 8px;
         width: 150px;
         max-height: 92%;
         overflow: hidden;
         //overflow-y: auto;
         z-index: 1000;
         color: white;
         box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
         display: flex;
         flex-direction: column;
       }

       #routeList {
         overflow-y: auto;
         overflow-x: hidden;
         padding-right: 6px;
       }

       #routeList::-webkit-scrollbar {
         width: 4px; /* narrower scrollbar */
       }

       #routeList::-webkit-scrollbar-thumb {
         background-color: rgba(200, 200, 200, 0.5); /* thumb color */
         border-radius: 3px;
       }

       #routeList::-webkit-scrollbar-track {
         background-color: transparent;
       }

       /*route pair buttons styling*/
       #routeList button {
         display: block;
         width: 100%;
         margin-bottom: 5px;
         padding: 4px;
         font-size: 10px;
         border-radius: 12px;
         border: 0.1px solid grey;
         background: #405664;
         color: white;
         cursor: pointer;
         transition: transform 0.2s ease;
         transform-origin: center;
         will-change: transform;
       }

       #routeList button:hover {
         transform: scale(1.2);
         background-color: #fbc965;
         color: black;
         z-index: 1;
       }

       /*format route pair button when selected*/
       #routeList button.selected-route {
         background-color: #fbc965;
         color: black;
         //font-weight: bold;
         border: 1px solid black;
       }

       #routeFilters {
         display: flex;
         justify-content: space-between;
         margin-bottom: 8px;
         background: rgba(0, 0, 0, 0.15);
         border-bottom: 1px solid #888;
       }

       .filter-btn {
         flex: 1;
         padding: 4px;
         margin: 2px;
         color: #486110;
         font-size: 12px;
         border-radius: 8px;
         border: none;
         cursor: pointer;
         background: #bfbfbf;
       }

       .filter-btn.selected {
         background-color: #fbc965; //orange;
         color: black; //
         font-size: 12px;
         font-weight: bold;
         border: 1px solid black;
       }

       /* sector tickbox list - right of the screen*/
       #sectorPanel {
         position: absolute;
         top: 3px;
         right: 5px;
         background: rgba(35, 49, 57, 0.7);
         color: white;
         font-family: sans-serif;
         font-size: 12px;
         border-radius: 8px;
         overflow: hidden;
         z-index: 1000;
         width: 75px;
         box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
       }

       #sectorHeader {
         // background: #222;
         padding: 8px;
         cursor: pointer;
         font-weight: bold;
         text-align: center;
       }

       #sectorOptions {
         padding: 8px;
         //display: none; /* start collapsed */
         max-height: 410px;
         overflow-y: auto;
       }

       #sectorOptions label {
         display: block;
         margin: 4px 0;
         font-size: 11px;
         cursor: pointer;
       }

       #sectorOptions {
         overflow-y: auto;
         overflow-x: hidden;
         padding-right: 6px;
       }

       #sectorOptions::-webkit-scrollbar {
         width: 4px; /* narrower scrollbar */
       }

       #sectorOptions::-webkit-scrollbar-thumb {
         background-color: rgba(200, 200, 200, 0.5); /* thumb color */
         border-radius: 3px;
       }

       #sectorOptions::-webkit-scrollbar-track {
         background-color: transparent;
       }

      /*sector letter in colored area styling big letter*/
      .sector-label {
        background: none !important;
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;
        margin: 0 !important;
        color: rgba(255, 255, 255, 0.3) !important;
        font-size: 48px !important;
        font-family: monospace !important;
        font-weight: bold !important;
        text-align: bottom !important;
        opacity: 1 !important;  /* Ensure container is fully visible; opacity is handled via rgba */
      }

      /* holding pattern tooltip styling*/
      .leaflet-tooltip.holding-tooltip {
        background-color: rgba(10, 60, 70, 1);
        color: yellow;              
        border: 1px solid grey; 
        border-radius: 10px;      
        padding: 6px 10px;
        font-size: 12px;
        font-family: Arial, sans-serif;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);;
      }

      /* Remove the little arrow ("tip") */
      .leaflet-tooltip.holding-tooltip::before,
      .leaflet-tooltip.holding-tooltip::after {
        display: none !important;
      }
       /*--display selected route pair remarks at the bottom of the screen*/
       #remarksOverlay {
         position: absolute;
         bottom: 133px;
         left: 50%;
         transform: translateX(-50%);
         background: rgba(134, 230, 173, 1);//green
         color: #013845;
         padding: 3px 10px;
         font-weight: bold;
         font-size: 12px;
         border-radius: 11px;
         z-index: 1500;
         pointer-events: none; /* so it doesn't block map clicks */
         white-space: pre-wrap;
         text-align: center;
       }

       /*--display sector initials at the bottom of the screen */
       #sectorTooltip {
         position: absolute;
         bottom: 95px;
         left: 50%;
         transform: translateX(-50%);
         padding: 6px 12px;
         background: #233139;
         color: white;
         font-size: 14px;
         font-family: 'Roboto', san-serif;
         //font-weight: bold;
         border-radius: 12px;
         z-index: 1001;
         max-width: 90%;
         text-align: center;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
       }

       /*--display CFL-XFL tooltip at both ends of the route*/
       .leaflet-tooltip.route-extra-label {
         /*background-color: rgba(305, 200, 230, 0.95);!important; //pink
         background-color: rgba(134, 230, 173, 0.9);!important; //green
         */
         background-color: rgba(134, 230, 173, 1);!important;
         color: #013845 !important;
         padding: 3px 10px;
         font-weight: bold;
         font-size: 12px;
         border: none; /* optional, removes default border */
         border-radius: 11px;
         position: "absolute",
       }

       /*--display route with airway names at the bottom of the screen */
       #routeTooltip {
         position: absolute;
         bottom: 60px;
         left: 50%;
         transform: translateX(-50%);
         padding: 6px 12px;
         background: #233139;
         color: white;
         font-size: 13px;
         font-family: 'Roboto', san-serif;
         //font-weight: bold;
         border-radius: 12px;
         z-index: 1001;
         max-width: 90%;
         text-align: center;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
       }

       /*--display full route fix names at the bottom of the screen */
       #expandedRouteTooltip {
         position: absolute;
         bottom: 23px;
         left: 50%;
         transform: translateX(-50%);
         padding: 6px 12px;
         background: #233139;
         color: white;
         font-size: 13.6px;
         font-family: monospace;
         //font-weight: bold;
         border-radius: 12px;
         z-index: 1001;
         max-width: 90%;
         text-align: center;
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
       }

       /*remove unnecessary space from top row of danger area tooltip*/
       #areaDetailsPanel::first-line {
         line-height: 0;   /* tighten the top */
       }

       /*add yellow spot at the end of the drawn route line*/
       .arrow-head {
         width: 3px;
         height: 3px;
         background: url('data:image/svg+xml;utf8,<svg fill="yellow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40"/></svg>')
           no-repeat center;
         background-size: contain;
         transform-origin: center;
       }
    </style>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
  </head>

    <!-- Menu bar for buttons -->
    <div id="mapMenuBar" class="map-menu-bar">
      <button id="resetViewBtn" class="map-btn">Clear</button>
      <button id="toggleMapBtn" class="map-btn">Toggle Map</button>
      <button id="toggleWaypointsBtn" class="map-btn">Names: ON</button>
      <button id="toggleTableBtn" class="map-btn">Sector Info ▸</button>
      <button id="showHoldingsBtn" class="map-btn">Holdings ▸</button>
      <div id="areasPanel" class="map-btn-panel">
        <button id="toggleAreasBtn" class="map-btn">Areas ▸</button>
        <div id="areasCheckboxes" class="areas-checkboxes">
          <label
            ><input type="checkbox" id="toggleProhibitated" />
            Prohibitated</label
          >
          <label
            ><input type="checkbox" id="toggleRestricted" /> Restricted</label
          >
          <label><input type="checkbox" id="toggleDanger" /> Danger</label>
          <label><input type="checkbox" id="toggleTraining" /> Training</label>
          <label><input type="checkbox" id="toggleDetails" /> Info</label>
        </div>
      </div>
    </div>

    <!--route filter buttons -->
    <body>
      <div id="routePanel">
        <div id="routeFilters">
          <button onclick="filterRoutes('Arr')" class="filter-btn selected">
            Arr
          </button>
          <button onclick="filterRoutes('Dep')" class="filter-btn">Dep</button>
          <button onclick="filterRoutes('Ovf')" class="filter-btn">Ovf</button>
          <button onclick="filterRoutes('FRA')" class="filter-btn">FRA</button>
        </div>
        <div id="routeList"></div>
      </div>

    <!--sector check box buttons -->
    <div id="sectorPanel">
      <div id="sectorHeader" onclick="toggleSectorPanel()">Sectors ▸</div>
      <div id="sectorOptions">
        <label><input type="checkbox" id="selectHighSectors" /> High</label>
        <label><input type="checkbox" id="selectLowSectors" /> Low</label>
        <hr style="margin: 6px 0; border-color: gray" />
        <label><input type="checkbox" value="S" /> ACCS</label>
        <label><input type="checkbox" value="L" /> ACCL</label>
        <label><input type="checkbox" value="B" /> ACCB</label>
        <label><input type="checkbox" value="G" /> ACCG</label>
        <label><input type="checkbox" value="A" /> ACCA</label>
        <label><input type="checkbox" value="N" /> ACCN</label>
        <label><input type="checkbox" value="M" /> ACCM</label>
        <label><input type="checkbox" value="W" /> ACCW</label>
        <label><input type="checkbox" value="C" /> ACCC</label>
        <label><input type="checkbox" value="D" /> ACCD</label>
        <label><input type="checkbox" value="H" /> ACCH</label>
        <label><input type="checkbox" value="E" /> ACCE</label>
        <label><input type="checkbox" value="Y" /> ACCY</label>
        <label><input type="checkbox" value="R" /> ACCR</label>
        <hr style="margin: 6px 0; border-color: gray" />
        <label><input type="checkbox" id="showSectorColors" /> Color</label>
      </div>
    </div>

    <!-- Floating Table for sector info-->
    <div
      id="sectorTablePanel"
      style="
        position: absolute;
        top: 32px;
        left: 174px;
        background: rgba(35, 49, 57, 0.6);
        color: white;
        padding: 10px;
        border-radius: 8px;
        font-size: 11px;
        font-family: sans-serif;
        z-index: 1500;
        display: none;
      ">

      <table
        id="sectorTable"
        border="1"
        cellpadding="5"
        cellspacing="0"
        style="border-collapse: collapse; background: #2c3e50; color: white"
      >
        <thead>
          <tr>
            <th>Sectors</th>
            <th>Limit</th>
            <th>Freq</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>


<!-- Top-center Daneger-Areas-Details Tooltip Panel -->

<div id="areaDetailsPanel" style="position:absolute; top:30px; left:50%; 
    transform:translateX(-50%); background:rgba(10, 60, 70, 1); white-space: pre-wrap;
    padding:8px 12px; border-radius:10px; border: 1px solid grey; font-size:13px; font-family: Arial, sans-serif;
    display:none; z-index:2000; text-align:left; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4); line-height: 1.5;">
  <strong id="areaName">Area</strong>
  <span id="areaLimit"></span>
  <span id="areaType"></span>
</div>

<!-- zoonslider at the bottom of the screen styling-->
    <div
      id="zoomSliderPanel"
      style="
        position: absolute;
        bottom: 15px;
        right: 15px;
        background: rgba(0, 0, 0, 0.1);
        padding: 8px;
        border-radius: 16px;
        color: white;
        font-size: 8px;
        font-family: sans-serif;
        width: 150px;
      ">
      <label for="zoomSlider"></label>
      <input
        type="range"
        id="zoomSlider"
        min="5"
        max="12"
        step="0.3"
        value="7"
      />
      <span id="zoomValue">7.0</span>
    </div>

    <div id="map"></div>
    <div id="sectorTooltip">Sectors:</div>
    <div id="routeTooltip">Route:</div>
    <div id="expandedRouteTooltip">Waypoints:</div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
      function convertDMSToDecimal(dmsStr) {
        const match = dmsStr.match(
          /^(\d{2,3})(\d{2})(\d{2}(?:\.\d+)?)([NSWE])$/
        );
        if (!match) return null;
        const [, deg, min, sec, dir] = match;
        let decimal =
          parseInt(deg) + parseInt(min) / 60 + parseFloat(sec) / 3600;
        if (dir === "S" || dir === "W") decimal *= -1;
        return decimal;
      }

     //main map border coordinates
      const rawCoords = [
        ["262100N", "0560600E"],
        ["253600N", "0561300E"],
        ["250000N", "0563500E"],
        ["240000N", "0553500E"],
        ["224200N", "0551200E"],
        ["225611N", "0523488E"],
        ["240300N", "0514700E"],
        ["254900N", "0530600E"],
        ["260430N", "0535730E"],
        ["253800N", "0552000E"],
        ["262100N", "0560600E"],
      ];

      const sectorPolygons = {};
      const sectorLayers = {};

     //convert coordinates decimal numbers
      const latlngs = rawCoords
        .map(([latDMS, lonDMS]) => [
          convertDMSToDecimal(latDMS),
          convertDMSToDecimal(lonDMS),
        ])
        .filter(([lat, lon]) => lat !== null && lon !== null);

     //sector coordinates
      const southCoords = [
        ["252629.4279N", "0524901.1237E"],
        ["251727.2300N", "0531010.5921E"],
        ["251028.0206N", "0532257.8798E"],
        ["245849.4608N", "0534229.3001E"],
        ["250412.9847N", "0535018.1858E"],
        ["245723.3151N", "0540231.4151E"],
        ["245234.9377N", "0540545.5866E"],
        ["245033.3087N", "0541052.3203E"],
        ["250339.4072N", "0544513.1108E"],
        ["244618.3182N", "0552117.0064E"],
        ["244334.4990N", "0551013.7592E"],
        ["243913.4400N", "0545229.7502E"],
        ["242300.0058N", "0541138.5536E"],
        ["242716.7810N", "0535734.9107E"],
        ["243600.0000N", "0531800.0000E"],
        ["244600.0000N", "0523759.9999E"],
        ["244600.0000N", "0522959.9999E"],
        ["244744.3023N", "0522002.9275E"],
        ["251037.0000N", "0523706.9999E"],
        ["252629.4279N", "0524901.1237E"],
      ];
      const limaCoords = [
        ["242716.7810N", "0535734.9107E"],
        ["243600.0000N", "0531800.0000E"],
        ["244600.0000N", "0523759.9999E"],
        ["244600.0000N", "0522959.9999E"],
        ["244744.3023N", "0522002.9275E"],
        ["240300.0000N", "0514659.9997E"],
        ["225600.0000N", "0523500.0000E"],
        ["223556.5997N", "0551544.6472E"],
        ["224200.0000N", "0551200.0000E"],
        ["234428.0000N", "0553023.0000E"],
        ["234730.0000N", "0552312.0000E"],
        ["240000.0000N", "0550000.0000E"],
        ["241035.8675N", "0544416.6401E"],
        ["241520.9775N", "0543711.8410E"],
        ["241930.0000N", "0543100.0000E"],
        ["241805.0000N", "0542246.0000E"],
        ["242300.0058N", "0541138.5536E"],
        ["242716.7810N", "0535734.9107E"],
      ];
      const bravoCoords = [
        ["244618.3182N", "0552117.0064E"],
        ["244334.4990N", "0551013.7592E"],
        ["243913.4400N", "0545229.7502E"],
        ["242300.0058N", "0541138.5536E"],
        ["241805.0000N", "0542246.0000E"],
        ["241930.0000N", "0543100.0000E"],
        ["241520.9775N", "0543711.8410E"],
        ["241035.8675N", "0544416.6401E"],
        ["240000.0000N", "0550000.0000E"],
        ["234730.0000N", "0552312.0000E"],
        ["234428.0000N", "0553023.0000E"],
        ["240000.0000N", "0553500.0000E"],
        ["242638.0000N", "0560135.0000E"],
        ["244618.3182N", "0552117.0064E"],
      ];
      const golfCoords = [
        ["251727.2300N", "0531010.5921E"],
        ["251028.0206N", "0532257.8798E"],
        ["244707.3259N", "0540157.3156E"],
        ["243848.6795N", "0542254.4400E"],
        ["242300.0058N", "0541138.5536E"],
        ["242716.7810N", "0535734.9107E"],
        ["243600.0000N", "0531800.0000E"],
        ["243820.9309N", "0530840.8314E"],
        ["245649.9309N", "0531415.2342E"],
        ["250230.4394N", "0530516.3033E"],
        ["251037.0000N", "0523706.9999E"],
        ["251727.2300N", "0531010.5921E"],
      ];
      const alphaCoords = [
        ["242638.0000N", "0560135.0000E"],
        ["240000.0000N", "0553500.0000E"],
        ["230227.0000N", "0551800.0000E"],
        ["230318.0000N", "0551327.0000E"],
        ["234730.0000N", "0552312.0000E"],
        ["240000.0000N", "0550000.0000E"],
        ["241035.8675N", "0544416.6401E"],
        ["241520.9775N", "0543711.8410E"],
        ["243913.4400N", "0545229.7502E"],
        ["244334.4990N", "0551013.7592E"],
        ["242638.0000N", "0560135.0000E"],
      ];
      const northCoords = [
        ["260400.0000N", "0535700.0000E"],
        ["254517.0000N", "0545647.0000E"],
        ["263406.0000N", "0541800.0000E"],
        ["264554.0000N", "0543610.0000E"],
        ["254331.0000N", "0552600.0000E"],
        ["253800.0000N", "0552000.0000E"],
        ["254135.8064N", "0550842.3936E"],
        ["252355.0000N", "0545522.0000E"],
        ["252814.0965N", "0543904.4502E"],
        ["254332.2605N", "0535708.1354E"],
        ["255450.0000N", "0532541.0000E"],
        ["260400.0000N", "0535700.0000E"],
      ];
      const mikeCoords = [
        ["254135.8064N", "0550842.3936E"],
        ["253800.0000N", "0552000.0000E"],
        ["262100.0000N", "0560600.0000E"],
        ["253600.0000N", "0561300.0000E"],
        ["252826.6958N", "0561738.3041E"],
        ["252808.0000N", "0563613.0000E"],
        ["250804.1040N", "0563547.0022E"],
        ["250810.0000N", "0563002.0000E"],
        ["250000.0000N", "0563500.0000E"],
        ["245608.0000N", "0563113.0000E"],
        ["244218.0000N", "0565415.0000E"],
        ["242218.0000N", "0563418.0000E"],
        ["243844.0000N", "0561342.0000E"],
        ["242638.0000N", "0560135.0000E"],
        ["250339.4072N", "0544513.1108E"],
        ["252355.0000N", "0545522.0000E"],
        ["254135.8064N", "0550842.3936E"],
      ];
      const westCoords = [
        ["255450.0000N", "0532541.0000E"],
        ["260400.0000N", "0535700.0000E"],
        ["254135.8064N", "0550842.3936E"],
        ["252355.0000N", "0545522.0000E"],
        ["252814.0965N", "0543904.4502E"],
        ["254332.2605N", "0535708.1354E"],
        ["255450.0000N", "0532541.0000E"],
      ];
      const centralCoords = [
        ["255450.0000N", "0532541.0000E"],
        ["254332.2605N", "0535708.1354E"],
        ["252814.0965N", "0543904.4502E"],
        ["252355.0000N", "0545522.0000E"],
        ["250339.4072N", "0544513.1108E"],
        ["245033.3087N", "0541052.3203E"],
        ["245234.9377N", "0540545.5866E"],
        ["245723.3151N", "0540231.4151E"],
        ["250412.9847N", "0535018.1858E"],
        ["245849.4608N", "0534229.3001E"],
        ["251028.0206N", "0532257.8798E"],
        ["251727.2300N", "0531010.5921E"],
        ["251037.0000N", "0523706.9999E"],
        ["252629.4279N", "0524901.1237E"],
        ["254900.0000N", "0530600.0000E"],
        ["255450.0000N", "0532541.0000E"],
      ];
      const deltaCoords = [
        ["254332.2605N", "0535708.1354E"],
        ["252814.0965N", "0543904.4502E"],
        ["252355.0000N", "0545522.0000E"],
        ["250548.0528N", "0544617.3882E"],
        ["250339.4072N", "0544513.1108E"],
        ["250118.4318N", "0543901.6006E"],
        ["243848.6795N", "0542254.4400E"],
        ["244707.3259N", "0540157.3156E"],
        ["251028.0206N", "0532257.8798E"],
        ["252535.0905N", "0533458.4084E"],
        ["254332.2605N", "0535708.1354E"],
      ];
      const hotelCoords = [
        ["254135.8064N", "0550842.3936E"],
        ["253800.0000N", "0552000.0000E"],
        ["251430.0000N", "0553449.0000E"],
        ["245614.2304N", "0552015.9927E"],
        ["244334.4990N", "0551013.7592E"],
        ["243913.4400N", "0545229.7502E"],
        ["241520.9775N", "0543711.8410E"],
        ["241930.0000N", "0543100.0000E"],
        ["241805.0000N", "0542246.0000E"],
        ["242300.0058N", "0541138.5536E"],
        ["243848.6795N", "0542254.4400E"],
        ["250118.4318N", "0543901.6006E"],
        ["250339.4072N", "0544513.1108E"],
        ["250548.0528N", "0544617.3882E"],
        ["252355.0000N", "0545522.0000E"],
        ["254135.8064N", "0550842.3936E"],
      ];
      const eastCoords = [
        ["243844.0000N", "0561342.0000E"],
        ["242638.0000N", "0560135.0000E"],
        ["244334.4990N", "0551013.7592E"],
        ["245614.2304N", "0552015.9927E"],
        ["251430.0000N", "0553449.0000E"],
        ["251050.5564N", "0560704.8139E"],
        ["250810.0511N", "0563001.9833E"],
        ["250000.0000N", "0563500.0000E"],
        ["245608.0000N", "0563113.0000E"],
        ["244218.0000N", "0565415.0000E"],
        ["242218.0000N", "0563418.0000E"],
        ["243844.0000N", "0561342.0000E"],
      ];
      const yankeeCoords = [
        ["250810.0000N", "0563002.0000E"],
        ["250006.2648N", "0563505.7475E"],
        ["245608.0000N", "0563113.0000E"],
        ["244913.4524N", "0564244.6367E"],
        ["243031.3688N", "0562400.6678E"],
        ["243844.0000N", "0561342.0000E"],
        ["244617.8166N", "0555938.9015E"],
        ["250141.0000N", "0555700.0000E"],
        ["250811.8360N", "0555918.3100E"],
        ["251050.5564N", "0560704.8139E"],
        ["251546.8257N", "0560815.8996E"],
        //["250810.0000N", "0563002.0000E"],
        //["251546.8257N", "0560815.8996E"],
        //["251050.5564N", "0560704.8139E"],
        ["250810.0000N", "0563002.0000E"],
      ];
      const romeoCoords = [
        ["253800.0000N", "0552000.0000E"],
        ["262100.0000N", "0560600.0000E"],
        ["253600.0000N", "0561300.0000E"],
        ["252826.6958N", "0561738.3041E"],
        ["252808.0000N", "0563613.0000E"],
        ["250804.1040N", "0563547.0022E"],
        ["250810.0000N", "0563002.0000E"],
        ["251050.5564N", "0560704.8139E"],
        //["250811.8360N", "0555918.3100E"],
        ["251050.5564N", "0560704.8139E"],
        ["251430.0000N", "0553449.0000E"],
        ["253800.0000N", "0552000.0000E"],
      ];
      /*
       const kboxCoords = [
        ["251727.2300N", "0531010.5921E"],
        ["251037.0000N", "0523706.9999E"],
        ["252629.4279N", "0524901.1237E"],
       ];
*/

      const highSectors = ["S", "B", "L", "N", "M", "C"];
      const lowSectors = ["G", "A", "W", "D", "H", "E", "Y", "R"];

      const rawSectorCoords = {
        S: southCoords,
        L: limaCoords,
        B: bravoCoords,
        G: golfCoords,
        A: alphaCoords,
        N: northCoords,
        M: mikeCoords,
        W: westCoords,
        C: centralCoords,
        D: deltaCoords,
        H: hotelCoords,
        E: eastCoords,
        Y: yankeeCoords,
        R: romeoCoords,
      };

      const sectorColors = {
        C: "crimson",
        S: "dodgerblue",
        A: "#FF7F50",
        G: "yellow",
        B: "gold",
        L: "plum",
        N: "#7C88EE",
        M: "#FE7F50",
        W: "orange",
        D: "violet",
        H: "white",
        E: "cyan",
        Y: "khaki",
        R: "#E478D7",
      };

      // Convert all to decimal
      for (const [key, coordList] of Object.entries(rawSectorCoords)) {
        sectorPolygons[key] = coordList.map(([latDMS, lonDMS]) => [
          convertDMSToDecimal(latDMS),
          convertDMSToDecimal(lonDMS),
        ]);
      }
      const extraPoints = {
        ADV: ["242508.3N", "0544023.7E"],
        ALGUX: ["242247N", "0541209E"],
        ALKAN: ["255224N", "0521625E"],
        ALNEV: ["244601N", "0534122E"],
        ALPOB: ["254218N", "0530055E"],
        ALRAR: ["254058.2N", "0550149.4E"],
        ALSEM: ["252705N", "0524336E"],
        ALSIL: ["252911.1N", "0554639.4E"],
        AMBOV: ["253439N", "0543512E"],
        AMBOV: ["253439N", "0543512E"],
        ANVIX: ["244655.0N", "0555616.0E"],
        ASNAX: ["245659N", "0524054E"],
        ASNEK: ["255630.7N", "0554904.7E"],
        ASNIB: ["243982N", "0572109E"],
        ASPAK: ["262115.49N", "0522257E"],
        ASPED: ["240036N", "0553154E"],
        ASRAT: ["242114N", "0535944E"],
        ASTOG: ["252822N", "0525025E"],
        ATUDO: ["241708.0N", "0543432.0E"],
        BAH: ["261625N", "0503801E"],
        BND: ["271182N", "0562201E"],
        BONAN: ["260200.60N", "0515505.41E"],
        BOPEK: ["230098N", "0520012E"],
        BOPIT: ["235947N", "0540404E"],
        BOPOV: ["262429.69N", "0515043.17E"],
        BOSEV: ["245013.3N", "0540448.8E"],
        BOTAM: ["240245N", "0565333E"],
        BOXOT: ["251039N", "0531817E"],
        BUBAS: ["245964N", "0570004E"],
        BUNDU: ["250024N", "0522924E"],
        DANOK: ["234220N", "0533111E"],
        DANUX: ["223608N", "0541596E"],
        DAPER: ["254536N", "0545751E"],
        DAPOK: ["235994N", "0572999E"],
        DASLO: ["254562N", "0523048E"],
        DATOB: ["253053.0N", "0544656.9E"],
        DATUT: ["263354N", "0533563E"],
        DAVMO: ["255127.0N", "0553900.0E"],
        DAXIB: ["245446.5N", "0540901.1E"],
        DEGNU: ["242757N", "0570622E"],
        DEGSO: ["261060.39N", "0531960.17E"],
        DENSA: ["263197N", "0542933E"],
        DESVU: ["242222N", "0554253E"],
        DETGU: ["252623.9N", "0553604.6E"],
        DIXAM: ["254151N", "0543557E"],
        DOH: ["251500N", "0513658E"],
        DXB: ["251517N", "0552187E"],
        EGMIT: ["263367N", "0530842E"],
        EGPEP: ["255746.8N", "0555822.5E"],
        EGPOG: ["244727N", "0531950E"],
        EGROK: ["235289N", "0560144E"],
        EGROP: ["245211N", "0543625E"],
        EGTAG: ["250856N", "0545652E"],
        ELEPO: ["243211N", "0544410E"],
        ELIGA: ["242121N", "0530148E"],
        ELIRA: ["262109N", "0534504E"],
        ELOBI: ["250782N", "0521760E"],
        ELOVU: ["245721.3N", "0542017.5E"],
        ELUDA: ["235107N", "0552905E"],
        EMATA: ["242315N", "0565734E"],
        EMERU: ["244829.0N", "0550303.0E"],
        EMISA: ["254658.35N", "0514206.60E"],
        EMIXI: ["242105N", "0520019E"],
        EMOPI: ["252620.0N", "0560900.0E"],
        EMOTA: ["255254N", "0542414E"],
        ENANO: ["252360.2N", "0522560.38E"],
        ENEGA: ["250556N", "0560601E"],
        ESROM: ["232424N", "0525729E"],
        FJV: ["250602.6N", "0562116.4E"],
        GABKO: ["260404N", "0554755E"],
        GERAR: ["240601N", "0573628E"],
        GERUL: ["250001.4N", "0542644.4E"],
        GEVIV: ["244118N", "0545000E"],
        GEXAN: ["241295N", "0565681E"],
        GIBIB: ["255507N", "0541712E"],
        GIDIL: ["251770N", "0564939E"],
        GIDIS: ["243600.0N", "0555600.0E"],
        GIDOB: ["244445.3N", "0535952.6E"],
        GISMO: ["244743N", "0562236E"],
        GODKI: ["254122N", "0534347E"],
        GOGMI: ["230226N", "0553198E"],
        GOLGU: ["231051N", "0523109E"],
        GOLPA: ["242330.0N", "0535854.0E"],
        GOMTA: ["251115N", "0563447E"],
        GONVI: ["254239.8N", "0545630.5E"],
        IMGOV: ["221846N", "0533640E"],
        IMGUX: ["252950N", "0531428E"],
        IMKUD: ["241513N", "0535956E"],
        IMLIP: ["243648N", "0543549E"],
        IMLOT: ["251714N", "0570806E"],
        IMPED: ["245824.5N", "0560406.2E"],
        ITBON: ["251426N", "0555257E"],
        ITBUL: ["254910N", "0541227E"],
        ITKEV: ["250104N", "0534526E"],
        ITKUN: ["223751N", "0553956E"],
        ITLAP: ["254925N", "0555010E"],
        ITMUB: ["255932N", "0522404E"],
        ITOMI: ["250152N", "0541151E"],
        ITRAX: ["241248.0N", "0554749.0E"],
        IVOXI: ["251239.6N", "0552513.1E"],
        IVURO: ["251940N", "0560915E"],
        KANIP: ["241040.0N", "0552042.0E"],
        KAPAX: ["254229N", "0515131E"],
        KAPUM: ["245815N", "0533450E"],
        KATUS: ["251599N", "0574701E"],
        KATIT: ["224928N", "0522923E"],
        KAXOB: ["245423N", "0532450E"],
        KHM: ["264578N", "0555446E"],
        KIPOK: ["243611N", "0560719E"],
        KIROP: ["243000.00N", "0574700.00E"],
        KIS: ["263151N", "0535774E"],
        KIVUS: ["254522N", "0540032E"],
        KOBIM: ["233315N", "0562702E"],
        KUGTO: ["243231N", "0542224E"],
        KULBA: ["251326N", "0560153E"],
        KUMLA: ["262615N", "0520837E"],
        KUMSI: ["245050N", "0523619E"],
        KUMUN: ["254000N", "0551512E"],
        KUPMA: ["245148N", "0562648E"],
        KUPRO: ["250805N", "0523513E"],
        KUPSA: ["250475N", "0521186E"],
        KURTA: ["234209N", "0554901E"],
        KURTU: ["252211N", "0554625E"],
        KUSBA: ["251634N", "0532847E"],
        KUSEN: ["251828.0N", "0562340.0E"],
        KUTLI: ["245151.3N", "0545618.0E"],
        KUVDA: ["244309N", "0543909E"],
        LABOP: ["261912N", "520449E"],
        LABRI: ["240344.0N", "0553842.0E"],
        LABSA: ["230189N", "0555509E"],
        LAGTA: ["250602N", "0553315E"],
        LAKLU: ["232259N", "0570402E"],
        LALDO: ["251806N", "0563600E"],
        LEVNA: ["261901N", "0533320E"],
        LONUT: ["241520N", "0530149E"],
        LORID: ["245552.5N", "0543904.1E"],
        LOVEM: ["252645.4N", "0551440.4E"],
        LUBAT: ["250223N", "0561749E"],
        LUDAM: ["255508N", "0535859E"],
        LUDID: ["230227N", "0551800E"],
        LVA: ["264799N", "0532317E"],
        MCT: ["233547N", "0581561E"],
        MEDPO: ["222436N", "0520786E"],
        MEKNA: ["233315N", "0560825E"],
        MEKRI: ["243122.8N", "0535500.0E"],
        MEMTU: ["232517N", "0552443E"],
        MENSA: ["245750N", "0563249E"],
        MIBRU: ["250321N", "0524540E"],
        MIGMA: ["225058N", "0512782E"],
        MIROT: ["250608.8N", "0543048.8E"],
        MISEG: ["252134N", "0555205E"],
        MITIX: ["251746.4N", "0550729.7E"],
        MIVEK: ["245240N", "0561516E"],
        MOBET: ["264411N", "0560913E"],
        MOBUL: ["251559N", "0541841E"],
        MODOG: ["261007N", "0515935E"],
        MOGIM: ["244053N", "0542820E"],
        MURGU: ["243212.8N", "0560319.9E"],
        MUSAP: ["241754N", "0555245E"],
        MUSEN: ["241429N", "0543236E"],
        MUXIT: ["230229N", "0523024E"],
        NABIX: ["251241.1N", "0543147.3E"],
        NABUN: ["240301.8N", "0545021.3E"],
        NADNI: ["251915.2N", "0555658.9E"],
        NADSO: ["244996N", "0574944E"],
        NALNU: ["244737N", "0560925E"],
        NALPO: ["255602N", "0532945E"],
        NAPMA: ["241250N", "0550312E"],
        NOBTO: ["235525.0N", "0551840.0E"],
        NOLSU: ["251248.0N", "0560737.8E"],
        NORGA: ["250352N", "0555415E"],
        NOSMI: ["241795N", "0563003E"],
        OBNET: ["260032N", "0534514E"],
        OBREV: ["250200N", "0551135E"],
        OBVOM: ["241503N", "0515552E"],
        ODKUN: ["242608N", "0544017E"],
        ORBOL: ["245134N", "0542348E"],
        ORKOB: ["245309N", "0562421E"],
        ORLUP: ["260686N", "0523226E"],
        ORMID: ["253354N", "0525434E"],
        ORNEL: ["240311.7N", "0551942.1E"],
        ORPAX: ["242628.0N", "0534533.0E"],
        ORSAR: ["260430N", "0535730E"],
        ORSIS: ["252801N", "0521661E"],
        OTIKI: ["253229N", "0541441E"],
        OVONA: ["252443N", "0524739E"],
        OXARI: ["252535N", "0533458E"],
        PAPAR: ["264000N", "0542700E"],
        PASOV: ["243841N", "0565037E"],
        PATAT: ["261613N", "0560059E"],
        PAVAG: ["251546N", "0554042E"],
        PAXIM: ["240274N", "0561652E"],
        PEDOG: ["242225.4N", "0555333.7E"],
        PEDUL: ["244116N", "0560205E"],
        PEKEM: ["224648N", "0535942E"],
        PURLI: ["253644N", "0532436E"],
        PURNI: ["243806N", "0574390E"],
        PUSOT: ["253919N", "0542011E"],
        PUTIB: ["251900N", "0525755E"],
        PUTSO: ["232062N", "0565336E"],
        PUVAL: ["253558.0N", "0554258.0E"],
        PUXIL: ["244117N", "0563145E"],
        RABLA: ["261505.73N", "0514833.68E"],
        RADEB: ["261167N", "0554731E"],
        RAGDO: ["252212N", "0535106E"],
        RALMI: ["254505N", "0533033E"],
        RAPNO: ["241452N", "0541559E"],
        RESAR: ["253711N", "0522346E"],
        RETAS: ["235754.0N", "0553423.0E"],
        REVAV: ["250909N", "0541012E"],
        REXEV: ["251502.3N", "0560136.7E"],
        RIBOT: ["230844N", "0522428E"],
        RIDAP: ["252553.7N", "0543701.2E"],
        RIGIL: ["230146N", "0551430E"],
        RORON: ["252053N", "0530916E"],
        ROSAN: ["263129.13N", "0515220.05E"],
        ROTAG: ["255388N", "0523635E"],
        ROVOS: ["241825.0N", "0552143.0E"],
        RUDAT: ["244605.1N", "0561714.1E"],
        RUDUK: ["252408N", "0541650E"],
        RUGIS: ["245916N", "0530340E"],
        RUKOR: ["250823N", "0554603E"],
        RURAL: ["243045N", "0543156E"],
        SENPA: ["251959.6N", "0543210.5E"],
        SERDU: ["264725N", "0545764E"],
        SERSA: ["251945N", "0553118E"],
        SIGMO: ["240710N", "0545837E"],
        SIR: ["255451N", "0543211E"],
        SISOB: ["253150N", "0534509E"],
        SIXIV: ["242009N", "0550439E"],
        SODEX: ["234954N", "0553202E"],
        SOGAN: ["263915N", "0515408E"],
        SOKAK: ["255131N", "0534251E"],
        SOLUD: ["243223N", "0564421E"],
        SUTVO: ["251531N", "0562153E"],
        SUVDU: ["243501N", "0542410E"],
        TAGDU: ["252258N", "0532153E"],
        TANSU: ["224136N", "0542828E"],
        TAPRA: ["242607N", "0563803E"],
        TARBO: ["244385N", "0574664E"],
        TARDI: ["243418N", "0560915E"],
        TATLA: ["254753N", "0544008E"],
        TOMSO: ["260619N", "0530224E"],
        TONKI: ["242645.1N", "0544851.2E"],
        TONVO: ["250500.0N", "0563200.0E"],
        TOSNA: ["251612N", "0524116E"],
        TOTKU: ["253534N", "0540410E"],
        TOVIV: ["253302N", "0551942E"],
        TOVOX: ["245342N", "0522429E"],
        TUBGO: ["242403N", "0551219E"],
        TUDIS: ["251009N", "0550825E"],
        TUKSI: ["252006N", "0560525E"],
        TULON: ["245511.4N", "0544739.1E"],
        TULBU: ["230009N", "571846E"],
        TUMAK: ["255031N", "0531108E"],
        UKILI: ["243815.5N", "0535636.4E"],
        UKNAV: ["244307N", "0542955E"],
        UKNEP: ["262145N", "0524830E"],
        UKRAG: ["233056N", "0552306E"],
        UKUBU: ["261447N", "0524060.5E"],
        UKUVO: ["251228N", "0534707E"],
        UKVAK: ["245147N", "0553329E"],
        UKVUP: ["261967N", "0540892E"],
        ULIVA: ["252647N", "0540611E"],
        ULODA: ["243530N", "0545301E"],
        UMAMI: ["245113.7N", "0560223.3E"],
        UMEVU: ["250545N", "0530653E"],
        UMIBU: ["242331N", "0543027E"],
        VAVIM: ["241535.1N", "0553622.9E"],
        VATIG: ["243659.0N", "0533241.0E"],
        VAXAS: ["244308N", "0561807E"],
        VEDED: ["260558.26N", "0514627.91E"],
        VEDOM: ["260116N", "0524494E"],
        VEGEK: ["251837N", "0540803E"],
        VEKAL: ["250333.5N", "0550340.5E"],
        VEKOV: ["245750N", "0544925E"],
        VELAK: ["261307N", "0521821E"],
        VELAM: ["255426.12N", "0514347.13E"],
        VUTAN: ["255026N", "0515230E"],
        VUTEB: ["253644.6N", "0545149.4E"],
        VELOD: ["234618N", "0573458E"],
        VUXOD: ["242005N", "0543625E"],
      };

      const airways = {
        A777: ["TONVO", "BUBAS", "NADSO"], //EXTERNAL
        "A791-": ["IMLOT", "GIDIL", "LALDO"], //EXTERNA
        A791: ["LALDO", "GIDIL", "IMLOT", "KATUS"],
        B415: [
          "DOH",
          "KUPSA",
          "BUNDU",
          "ASNAX",
          "EGPOG",
          "UKILI",
          "KUGTO",
          "RURAL",
          "SIXIV",
        ],
        B505: ["LALDO", "NADSO"], //EXTERNAL
        B540: ["GERAR", "DEGNU", "PASOV", "KUPMA", "ORKOB", "MIVEK"],
        B541: ["KIS", "ORSAR"], //EXTERNAL
        G462: [
          "ROVOS",
          "TUBGO",
          "ULODA",
          "KUVDA",
          "ORBOL",
          "UKUVO",
          "OXARI",
          "PURLI",
          "TUMAK",
        ],
        G666: [
          "LVA",
          "DATUT",
          "ELIRA",
          "ORSAR",
          "LUDAM",
          "KIVUS",
          "TOTKU",
          "ULIVA",
          "VEGEK",
          "REVAV",
          "ITOMI",
          "ELOVU",
        ],
        "G783-": [
          "GIDIS",
          "DESVU",
          "VAVIM",
          "ASPED",
          "ELUDA",
          "UKRAG",
          "RIGIL",
          "TANSU",
        ],
        G783: [
          "IMGOV",
          "DANUX",
          "TANSU",
          "RIGIL",
          "UKRAG",
          "ELUDA",
          "ASPED",
          "VAVIM",
        ],
        L223: [
          "UKVUP",
          "SIR",
          "TATLA",
          "VUTEB",
          "LOVEM",
          "IVOXI",
          "LAGTA",
          "ANVIX",
          "PEDUL",
          "KIPOK",
          "TARDI",
          "NOSMI",
          "BOTAM",
        ],
        L305: [
          "DOH",
          "ENANO",
          "ALSEM",
          "ASTOG",
          "PURLI",
          "GODKI",
          "KIVUS",
          "ITBUL",
          "EMOTA",
        ],
        L313: ["EGPEP", "KULBA", "IMPED", "KIPOK"],
        L519: [
          "PATAT",
          "EGPEP",
          "ITLAP",
          "PUVAL",
          "DETGU",
          "SERSA",
          "IVOXI",
          "VEKAL",
          "KUTLI",
          "GEVIV",
          "ODKUN",
          "VUXOD",
          "ATUDO",
        ],
        L710: ["UKRAG", "MEMTU", "GOGMI", "ITKUN"],
        L768: ["ALPOB", "ROTAG", "ITMUB", "MODOG", "RABLA"],
        M317: ["RADEB", "SERDU"], //EXTERNAL
        "M318-": ["ATUDO", "MUSEN", "BOPIT", "DANOK", "ESROM", "GOLGU"],
        M318: [
          "MEDPO",
          "KATIT",
          "MUXIT",
          "GOLGU",
          "ESROM",
          "DANOK",
          "BOPIT",
          "MUSEN",
          "ATUDO",
          "RURAL",
          "IMLIP",
          "KUVDA",
          "TULON",
          "VEKOV",
          "EGTAG",
          "MITIX",
          "LOVEM",
          "TOVIV",
          "DAVMO",
          "GABKO",
          "RADEB",
          "KHM",
        ],
        M324: ["BND", "MOBET", "PATAT"], //EXTERNAL
        M428: ["IVURO", "SUTVO", "GOMTA", "TARBO"],
        M430: ["OXARI", "TAGDU", "RORON", "PUTIB", "TOSNA", "DOH"],
        M550: ["MIGMA", "BOPEK", "RIBOT", "GOLGU"],
        M557: [
          "IVOXI",
          "MITIX",
          "RIDAP",
          "OTIKI",
          "TOTKU",
          "GODKI",
          "RALMI",
          "TUMAK",
        ],
        M564: ["PASOV", "PUXIL", "VAXAS", "NALNU", "UMAMI"],
        M572: ["NOLSU", "GOMTA"],
        M628: ["MIGMA", "KATIT", "PEKEM", "RIGIL"],
        "M628-": ["LABSA", "GOGMI", "LUDID", "RIGIL", "PEKEM", "KATIT"],
        "M677-": ["LALDO", "KUSEN", "IVURO", "TUKSI"],
        M677: [
          "SOGAN",
          "UKNEP",
          "DEGSO",
          "OBNET",
          "LUDAM",
          "ITBUL",
          "DIXAM",
          "VUTEB",
          "LOVEM",
          "KURTU",
          "MISEG",
          "TUKSI",
          "IVURO",
          "KUSEN",
          "LALDO",
        ],
        M762: ["VELOD", "GEXAN", "TAPRA", "VAXAS", "RUDAT", "MIVEK"],
        N300: [
          "DOH",
          "KUPRO",
          "MIBRU",
          "RUGIS",
          "KAXOB",
          "GIDOB",
          "ORBOL",
          "LORID",
          "VEKOV",
          "OBREV",
          "LAGTA",
          "RUKOR",
          "NOLSU",
          "SUTVO",
          "LALDO",
        ],
        "N300-": ["RUKOR", "LAGTA", "OBREV"],
        N317: ["MENSA", "NOLSU", "REXEV", "NADNI"],
        N318: [
          "VELAM",
          "VUTAN",
          "RESAR",
          "OVONA",
          "PUTIB",
          "BOXOT",
          "KAPUM",
          "BOSEV",
          "MOGIM",
          "IMLIP",
          "ELEPO",
          "SIXIV",
          "KANIP",
          "LABRI",
          "EGROK",
          "LAKLU",
        ],
        N563: [
          "TULBU",
          "MEKNA",
          "KURTA",
          "SODEX",
          "ELUDA",
          "NOBTO",
          "SIGMO",
          "VUXOD",
          "UMIBU",
          "KUGTO",
          "BOSEV",
          "ITKEV",
          "KUSBA",
          "TAGDU",
          "IMGUX",
          "ALPOB",
        ],
        N571: [
          "KIROP",
          "ASNIB",
          "MENSA",
          "LUBAT",
          "ENEGA",
          "RUKOR",
          "IVOXI",
          "TUDIS",
          "SENPA",
          "RUDUK",
          "ULIVA",
          "SISOB",
          "PURLI",
          "ALPOB",
        ],
        N685: [
          "EMISA",
          "KAPAX",
          "ORSIS",
          "ENANO",
          "TOSNA",
          "UMEVU",
          "KAPUM",
          "GIDOB",
          "SUVDU",
          "RURAL",
          "ODKUN",
          "NAPMA",
          "ORNEL",
          "RETAS",
          "KOBIM",
          "PUTSO",
        ],
        P307: ["SERSA", "PAVAG", "ITBON", "KULBA", "NOLSU", "TONVO", "PURNI"],
        P440: ["ALGUX", "ASRAT", "ELIGA", "EMIXI"],
        P555: ["OBVOM", "LONUT", "IMKUD", "RAPNO", "ATUDO"],
        P559: [
          "ROSAN",
          "KUMLA",
          "ASPAK",
          "UKUBU",
          "TOMSO",
          "NALPO",
          "SOKAK",
          "KIVUS",
          "PUSOT",
          "AMBOV",
          "VUTEB",
        ],
        P574: [
          "DAPOK",
          "EMATA",
          "SOLUD",
          "PUXIL",
          "GISMO",
          "MIVEK",
          "IMPED",
          "NORGA",
          "RUKOR",
          "SERSA",
          "TOVIV",
          "KUMUN",
        ],
        "P574-": ["DAPER", "DENSA"],
        P699: [
          "TUKSI",
          "PAVAG",
          "IVOXI",
          "TUDIS",
          "EGTAG",
          "NABIX",
          "MOBUL",
          "VEGEK",
          "RAGDO",
          "OXARI",
          "IMGUX",
          "ORMID",
          "DASLO",
          "ALKAN",
          "BONAN",
          "VEDED",
        ],
        P899: [
          "VELOD",
          "PAXIM",
          "ITRAX",
          "VAVIM",
          "ROVOS",
          "SIXIV",
          "UMIBU",
          "MEKRI",
          "KUMSI",
          "TOVOX",
          "KUPSA",
        ],
        Q308: ["ASPED", "PEDOG", "MURGU", "KIPOK", "RUDAT", "ORKOB"],
        Q311: ["IVOXI", "OBREV", "EMERU", "TONKI", "NABUN"],
        Q312: ["REVAV", "GERUL"],
        Q317: ["RURAL", "UKNAV", "EGROP", "LORID"],
        Q321: ["TOVIV", "DETGU", "KURTU", "NOLSU"],
        Q322: ["AMBOV", "DATOB", "LOVEM"],
        Q322: ["ITBUL", "PUSOT", "AMBOV", "DATOB", "LOVEM"],
        Q323: ["MITIX", "PAVAG"],
        Q415: [
          "UMEVU",
          "KAXOB",
          "ALNEV",
          "UKILI",
          "KUGTO",
          "IMLIP",
          "GEVIV",
          "UKVAK",
          "IMPED",
          "LUBAT",
          "TONVO",
        ],
        Q563: ["DAXIB", "UKUVO", "IMGUX"],
        Q565: ["BOSEV", "UKUVO"],
        Q568: ["KIPOK", "NALNU", "IMPED"],
        Q569: ["VUTEB", "MITIX", "OBREV"],
        Q572: ["ALRAR", "LOVEM", "SERSA"],
        Q576: ["EGTAG", "MIROT", "REVAV", "UKUVO", "KUSBA", "RORON"],
        Q666: ["EGPOG", "ALNEV", "GIDOB"],
        R401: [
          "LABSA",
          "KURTA",
          "MUSAP",
          "PEDOG",
          "GIDIS",
          "ANVIX",
          "NORGA",
          "ITBON",
          "MISEG",
          "ITLAP",
          "ASNEK",
          "GABKO",
        ],
        R784: [
          "EGMIT",
          "LEVNA",
          "ORSAR",
          "GIBIB",
          "EMOTA",
          "TATLA",
          "GONVI",
          "ALRAR",
          "TOVIV",
          "ALSIL",
          "EMOPI",
          "KUSEN",
        ],
        T509: ["PASOV", "MENSA", "FJV"],
        T560: ["ORNEL", "ELUDA"],
        T602: ["TUMAK", "VEDOME", "ORLUP", "VELAK", "LABOP", "BOPOV"],
        T891: ["ORKOB", "LUBAT", "NOLSU"],
        Y552: ["NABUN", "SIGMO", "NAPMA", "TUBGO", "UKVAK", "RUKOR"],
        Z522: ["KAPUM", "ALNEV"],
        //"B547": ["KIS", "SIR"], //EXTERNAL
      };

      const routeSectors = {
        "BUNDU-LABRI": ["S", "B"],
        "BUNDU-RETAS": ["S", "B"],
        "BUNDU-TONVO": ["S", "M"],
        "ITRAX-ALPOB": ["B", "S", "C"],
        "ITRAX-ALPOB": ["B", "S", "C"],
        "ITRAX-ORMID*": ["B", "S", "C"],
        "ITRAX-ORMID": ["B", "S", "C"],
        "ITRAX-TOVOX": ["B", "S", "C"],
        "ITRAX-TUMAK": ["B", "S", "C"],
        "ITRAX-TUMAK*": ["B", "S", "C"],
        "KUPRO-GABKO": ["S", "M"],
        "KUPRO-LALDO*": ["S", "G", "D", "H", "R"],
        "KUPRO-LALDO": ["S", "M"],
        "KUPRO-TONVO": ["S", "M"],
        "LALDO-ALPOB": ["M", "C"],
        "LALDO-ORMID": ["M", "C"],
        "LALDO-TOSNA": ["M", "C"],
        "LALDO-TUMAK": ["M", "C"],
        "LUDID-PEKEM": ["L"],
        "LUDID-TANSU": ["L"],
        "MENSA-ALPOB": ["M", "C"],
        "MENSA-KUMUN": ["M"],
        "MENSA-ORMID": ["M", "C"],
        "MENSA-TOSNA": ["M", "C"],
        "MENSA-TUMAK": ["M", "C"],
        "MUSAP-KUMUN": ["M"],
        "NALPO-GABKO": ["N", "M"],
        "NALPO-LALDO": ["N", "M"],
        "NALPO-TARDI": ["N", "M"],
        "NALPO-TONVO": ["N", "M"],
        "OBNET-GABKO": ["N", "M"],
        "OBNET-LALDO": ["N", "M"],
        "OBNET-TARDI": ["N", "M"],
        "OBNET-TONVO": ["N", "M"],
        "ORSAR-LALDO": ["N", "M"],
        "ORSAR-TARDI": ["N", "M"],
        "ORSAR-TONVO": ["N", "M"],
        "OVONA-LABRI": ["S", "B"],
        "OVONA-RETAS": ["S", "B"],
        "PATAT-ALPOB": ["M", "C"],
        "PATAT-ORMID": ["M", "C"],
        "PATAT-TARDI": ["M"],
        "PATAT-TOSNA": ["M", "C"],
        "PATAT-TUMAK": ["M", "C"],
        "PEKEM-GABKO": ["L", "B", "M"],
        "SIR-LALDO": ["N", "M"],
        "SIR-TARDI": ["N", "M"],
        "SIR-TONVO": ["N", "M"],
        "SODEX-ALPOB": ["B", "S", "C"],
        "SODEX-ORMID": ["B", "S", "C"],
        "SODEX-TOVOX": ["B", "S"],
        "SODEX-TUMAK": ["B", "S", "C"],
        "SOLUD-ALPOB": ["M", "C"],
        "SOLUD-GABKO": ["M"],
        "SOLUD-KUMUN": ["M"],
        "SOLUD-ORMID": ["M", "C"],
        "SOLUD-TUMAK": ["M", "C"],
        "TANSU-GABKO": ["L", "B", "M"],
        "TOSNA-LABRI": ["S", "B"],
        "TOSNA-RETAS": ["S", "B"],
        "OMAA,AD-ALPOB": ["D", "C"],
        "OMAA,AD-GABKO": ["H", "M"],
        "OMAA,AD-KATIT": ["H", "L"],
        "OMAA,AD-KUMUN": ["H", "M"],
        "OMAA,AD-LABRI": ["A"],
        "OMAA,AD-ORMID": ["D", "C"],
        "OMAA,AD-ORSAR": ["D", "W"],
        "OMAA,AD-PEKEM": ["A", "L"],
        "OMAA,AD-RETAS": ["A"],
        "OMAA,AD-RIBOT": ["L"],
        "OMAA,AD-TANSU": ["A", "L"],
        "OMAA,AD-TOVOX": ["G", "S"],
        "OMAA,AD-TUMAK": ["D", "C"],
        "OMAL-ALPOB": ["H", "D", "C"],
        "OMAL-GABKO": ["H", "M"],
        "OMAL-KATIT": ["L"],
        "OMAL-KUMUN": ["H", "M"],
        "OMAL-LABRI": ["A"],
        "OMAL-ORMID": ["H", "D", "C"],
        "OMAL-PEKEM": ["A", "L"],
        "OMAL-RETAS": ["A"],
        "OMAL-RIBOT": ["L"],
        "OMAL-TANSU": ["A", "L"],
        "OMAL-TOVOX": ["H", "G", "S"],
        "OMAL-TUMAK": ["H", "D", "C"],
        "OMDB,DW,SJ-ALPOB": ["D", "C"],
        "OMDB,SJ-GABKO": ["R"],
        "OMDB,DW,SJ-KATIT": ["H", "L"],
        "OMDB,DW,SJ-KUMUN": [""],
        "OMDB,DW,SJ-MEMTU": ["E", "A", "L"],
        "OMDB,DW,SJ-ORMID": ["D", "C"],
        "OMDB,DW,SJ-ORSAR": ["R"],
        "OMDB,DW,SJ-PEKEM": ["E", "A", "L"],
        "OMDB,DW,SJ-RIBOT": ["H", "L"],
        "OMDB,DW,SJ-TANSU": ["E", "A", "L"],
        "OMDB,DW,SJ-TARDI": ["E"],
        "OMDB,DW,SJ-TOSNA*": ["D", "C"],
        "OMDB,DW,SJ-TOSNA": ["D", "C"],
        "OMDB,DW,SJ-TUMAK": ["D", "C"],
        "OMDB,SJ-GOMTA": ["R"],
        "OMDB,SJ-LALDO": ["R"],
        "OMDW-GABKO": ["H", "R"],
        "OMDW-GOMTA": ["R"],
        "OMDW-LALDO": ["R"],
        "OMFJ-ALPOB": ["R", "H", "D", "C"],
        "OMFJ-GABKO": ["R"],
        "OMFJ-KATIT": ["H", "L"],
        "OMFJ-ORMID": ["R", "H", "D", "C"],
        "OMFJ-PEKEM": ["E", "A", "L"],
        "OMFJ-RIBOT": ["H", "L"],
        "OMFJ-TANSU": ["E", "A", "L"],
        "OMFJ-TONVO": ["R"],
        "OMFJ-TOSNA": ["R", "H", "D", "C"],
        "OMFJ-TUMAK": ["H", "D", "C"],
        "OMRK-ALPOB": ["R", "H", "D", "C"],
        "OMRK-GABKO": ["R"],
        "OMRK-GOMTA": ["R"],
        "OMRK-KATIT": ["H", "L"],
        "OMRK-LALDO": ["R"],
        "OMRK-MEMTU": ["E", "A", "L"],
        "OMRK-ORMID": ["H", "D", "C"],
        "OMRK-PEKEM": ["H", "L"],
        "OMRK-RIBOT": ["H", "L"],
        "OMRK-TANSU": ["E", "A", "L"],
        "OMRK-TARDI": ["E"],
        "OMRK-TOSNA": ["H", "D", "C"],
        "OMRK-TUMAK": ["H", "D", "C"],
        "ASTOG-OMDB": ["C", "W"],
        "ASTOG-OMDW": ["C", "W"],
        "ASTOG-OMFJ": ["C", "W"],
        "ASTOG-OMRK": ["C", "W"],
        "ASTOG-OMSJ": ["C", "W"],
        "BUNDU-OMAA": ["S", "G"],
        "BUNDU-OMAD": ["S", "G"],
        "BUNDU-OMAL": ["S", "G"],
        "ITRAX-OMAA,AD": ["A"],
        "ITRAX-OMAL": ["A"],
        "KATIT-OMAA,AD": ["L"],
        "KATIT-OMAL": ["L"],
        "KATIT-OMDB": ["L", "H"],
        "KATIT-OMDW": ["L"],
        "KATIT-OMRK": ["L", "H"],
        "KATIT-OMSJ": ["L", "H"],
        "KUPRO-OMAA": ["S", "G"],
        "KUPRO-OMAD": ["S", "G"],
        "KUPRO-OMAL": ["S", "G"],
        "MENSA-OMFJ": ["E", "Y"],
        "MENSA-OMRK": ["E", "Y"],
        "MENSA-OMSJ": ["E", "Y"],
        "MUSAP-OMDB": ["E", "Y"],
        "MUSAP-OMDW": ["E", "Y"],
        "MUSAP-OMFJ": ["E", "Y"],
        "MUSAP-OMRK": ["E", "Y"],
        "MUSAP-OMSJ": ["E", "Y"],
        "NALPO-OMDB": ["N", "W"],
        "NALPO-OMDW": ["N", "W"],
        "NALPO-OMDW*": ["N", "D"],
        "NALPO-OMFJ": ["N", "H", "R"],
        "NALPO-OMRK": ["N", "W"],
        "NALPO-OMSJ": ["N", "W"],
        "OBNET-OMDB": ["N", "W"],
        "OBNET-OMDW": ["N", "W"],
        "OBNET-OMDW*": ["N", "D"],
        "OBNET-OMFJ": ["N", "H", "R"],
        "OBNET-OMRK": ["N", "W"],
        "OBNET-OMSJ": ["N", "W"],
        "ORSAR-OMAA": ["N", "D"],
        "ORSAR-OMAA,AD*": ["N", "D"],
        "ORSAR-OMAA,AD": ["N", "H"],
        "ORSAR-OMAD": ["N", "D"],
        "ORSAR-OMAL": ["N", "H"],
        "ORSAR-OMDB": ["N", "W"],
        "ORSAR-OMDW*": ["N", "D"],
        "ORSAR-OMDW": ["N", "W"],
        "ORSAR-OMFJ": ["N", "H", "R"],
        "ORSAR-OMRK": ["N", "W"],
        "ORSAR-OMSJ": ["N", "W"],
        "OVONA-OMAA": ["S", "G"],
        "OVONA-OMAD": ["S", "G"],
        "OVONA-OMAL": ["S", "G", "H"],
        "PASOV-OMDB": ["E", "Y"],
        "PASOV-OMDW": ["E", "Y"],
        "PASOV-OMRK": ["E", "Y"],
        "PASOV-OMSJ": ["E", "Y"],
        "PATAT-OMAA,AD": ["M", "H"],
        "PATAT-OMAL": ["M", "H"],
        "PATAT-OMDB,SJ,DW": ["R"],
        "PATAT-OMFJ": ["R"],
        "PATAT-OMRK": ["R"],
        "PEKEM-OMAA,AD": ["L", "A"],
        "PEKEM-OMAL": ["L", "A"],
        "PEKEM-OMDB": ["L", "A", "E", "Y"],
        "PEKEM-OMDW": ["L", "A", "E", "Y"],
        "PEKEM-OMFJ": ["L", "A", "E", "Y"],
        "PEKEM-OMRK": ["L", "A", "E", "Y"],
        "PEKEM-OMSJ": ["L", "A", "E", "Y"],
        "RIBOT-OMAA,AD": ["L"],
        "RIBOT-OMAL": ["L"],
        "RIBOT-OMDB,SJ": ["L", "H"],
        "RIBOT-OMDW": ["L"],
        "RIBOT-OMRK": ["L", "H"],
        "SODEX-OMAA,AD": ["A"],
        "SODEX-OMAL": ["A"],
        "SOLUD-OMDB": ["E", "Y"],
        "TANSU-OMAA,AD": ["L", "A"],
        "TANSU-OMAL": ["L", "A"],
        "TANSU-OMDB": ["L", "A", "E", "Y"],
        "TANSU-OMDW": ["L", "A", "E"],
        "TANSU-OMFJ": ["L", "A", "E", "Y"],
        "TANSU-OMRK": ["L", "A", "E", "Y"],
        "TANSU-OMSJ": ["L", "A", "E", "Y"],
        "TAPRA-OMDB": ["E", "Y"],
        "TAPRA-OMDW": ["E", "Y"],
        "TOSNA-OMAA": ["S", "G"],
        "TOSNA-OMAD": ["S", "G"],
        "TOSNA-OMAL": ["S", "G", "H"],
        "VAXAS-OMDB": ["E", "Y"],
        "VAXAS-OMDW": ["E", "Y"],
        "VAXAS-OMRK": ["E", "Y"],
        "VAXAS-OMSJ": ["E", "Y"],
        "BUNDU-LABRI-FRA": ["S", "B"],
        "BUNDU-LABRI*-FRA": ["S", "B"],
        "BUNDU-OMAA-FRA": ["S", "G"],
        "BUNDU-OMAD-FRA": ["S", "G"],
        "BUNDU-OMAL-FRA": ["S", "G"],
        "BUNDU-RETAS-FRA": ["S", "B"],
        "BUNDU-TONVO-FRA": ["S", "M"],
        "BUNDU-TONVO*-FRA": ["S", "M"],
        "GISMO-ALPOB-FRA": ["M", "C"],
        "GISMO-GABKO-FRA": ["M"],
        "GISMO-KUMUN-FRA": ["M"],
        "GISMO-ORMID-FRA": ["M", "C"],
        "GISMO-TUMAK-FRA": ["M", "C"],
        "ITRAX-ALPOB-FRA": ["B", "S", "C"],
        "ITRAX-ORMID-FRA": ["B", "S", "C"],
        "ITRAX-TOVOX*-FRA": ["B", "S"],
        "ITRAX-TOVOX-FRA": ["B", "S"],
        "ITRAX-TUMAK-FRA": ["B", "S", "C"],
        "KUPRO-LALDO*-FRA": ["S", "M"],
        "KUPRO-LALDO-FRA": ["S", "M"],
        "KUPRO-TONVO-FRA": ["S", "M"],
        "KUPRO-TONVO*-FRA": ["S", "M"],
        "LALDO-ALPOB-FRA": ["M", "C"],
        "LALDO-ORMID-FRA": ["M", "C"],
        "LALDO-TOSNA-FRA": ["M", "C"],
        "LALDO-TUMAK-FRA": ["M", "C"],
        "MENSA-ALPOB-FRA": ["M", "C"],
        "MENSA-ORMID-FRA": ["M", "C"],
        "MENSA-TOSNA-FRA": ["M", "C"],
        "MENSA-TUMAK-FRA": ["M", "C"],
        "NALPO-LALDO-FRA": ["N", "M"],
        "NALPO-TARDI-FRA": ["N", "M"],
        "NALPO-TARDI*-FRA": ["N", "M"],
        "NALPO-TONVO-FRA": ["N", "M"],
        "OBNET-LALDO-FRA": ["N", "M"],
        "OBNET-TARDI-FRA": ["N", "M"],
        "OBNET-TARDI*-FRA": ["N", "M"],
        "OBNET-TONVO-FRA": ["N", "M"],
        "ORSAR-LALDO-FRA": ["M"],
        "ORSAR-TARDI-FRA": ["M"],
        "ORSAR-TARDI*-FRA": ["M"],
        "ORSAR-TONVO-FRA": ["M"],
        "OVONA-LABRI-FRA": ["S", "B"],
        "OVONA-RETAS-FRA": ["S", "B"],
        "PATAT-ALPOB-FRA": ["M", "C"],
        "PATAT-OMAA ,AD-FRA": ["M", "H"],
        "PATAT-OMAL-FRA": ["M", "H"],
        "PATAT-ORMID-FRA": ["M", "C"],
        "PATAT-TARDI-FRA": ["M"],
        "PATAT-TARDI*-FRA": ["M"],
        "PATAT-TOSNA-FRA": ["M", "C"],
        "PATAT-TUMAK-FRA": ["M", "C"],
        "SIR-LALDO-FRA": ["N", "M"],
        "SIR-TARDI-FRA": ["N", "M"],
        "SIR-TARDI*-FRA": ["N", "M"],
        "SIR-TONVO-FRA": ["N", "M"],
        "SODEX-ALPOB-FRA": ["B", "S", "C"],
        "SODEX-ORMID-FRA": ["B", "S", "C"],
        "SODEX-TOVOX-FRA": ["B", "S"],
        "SODEX-TOVOX*-FRA": ["B", "S"],
        "SODEX-TUMAK-FRA": ["B", "S", "C"],
        "TOSNA-LABRI-FRA": ["S", "B"],
        "TOSNA-RETAS-FRA": ["S", "B"],
      };

      //----------
      const routes = {
        //1.9.3. The following standard routings apply for traffic transiting the FIR below FL 355:
        "BUNDU-LABRI": ["BUNDU", "B415", "SIXIV", "N318", "LABRI"],
        "BUNDU-RETAS": ["BUNDU", "B415", "RURAL", "N685", "RETAS"],
        "BUNDU-TONVO": ["BUNDU", "B415", "KUGTO", "Q415", "TONVO"],
        "ITRAX-ALPOB": ["ITRAX", "P899", "UMIBU", "N563", "ALPOB"],
        "ITRAX-ALPOB": [
          "ITRAX",
          "P899",
          "ROVOS",
          "G462",
          "UKUVO",
          "Q563",
          "IMGUX",
          "N563",
          "ALPOB",
        ],
        "ITRAX-ORMID*": [
          "ITRAX",
          "P899",
          "UMIBU",
          "N563",
          "IMGUX",
          "P699",
          "ORMID",
        ],
        "ITRAX-ORMID": [
          "ITRAX",
          "P899",
          "ROVOS",
          "G462",
          "UKUVO",
          "Q563",
          "IMGUX",
          "P699",
          "ORMID",
        ],
        "ITRAX-TOVOX": ["ITRAX", "P899", "TOVOX"],
        "ITRAX-TUMAK": ["ITRAX", "P899", "ROVOS", "G462", "TUMAK"],
        "ITRAX-TUMAK*": [
          "ITRAX",
          "P899",
          "UMIBU",
          "N563",
          "BOSEV",
          "Q565",
          "UKUVO",
          "G462",
          "TUMAK",
        ],
        "KUPRO-GABKO": ["KUPRO", "N300", "VEKOV", "M318", "GABKO"],
        "KUPRO-LALDO*": [
          "KUPRO",
          "N300",
          "VEKOV",
          "M318",
          "MITIX",
          "Q323",
          "PAVAG",
          "P307",
          "NOLSU",
          "N300",
          "LALDO",
        ],
        "KUPRO-LALDO": ["KUPRO", "N300", "LALDO"],
        "KUPRO-TONVO": ["KUPRO", "N300", "NOLSU", "P307", "TONVO"],
        "LALDO-ALPOB": [
          "LALDO",
          "M677",
          "TUKSI",
          "P699",
          "IVOXI",
          "N571",
          "ALPOB",
        ],
        "LALDO-ORMID": ["LALDO", "M677", "TUKSI", "P699", "ORMID"],
        "LALDO-TOSNA": [
          "LALDO",
          "M677",
          "TUKSI",
          "P699",
          "EGTAG",
          "Q576",
          "RORON",
          "M430",
          "TOSNA",
        ],
        "LALDO-TUMAK": [
          "LALDO",
          "M677",
          "TUKSI",
          "P699",
          "IVOXI",
          "M557",
          "TUMAK",
        ],
        "LUDID-PEKEM": ["LUDID", "M628-", "PEKEM"],
        "LUDID-TANSU": ["LUDID", "M628-", "RIGIL", "G783", "TANSU"],
        "MENSA-ALPOB": ["MENSA", "N571", "ALPOB"],
        "MENSA-KUMUN": ["MENSA", "N571", "RUKOR", "P574", "KUMUN"],
        "MENSA-ORMID": ["MENSA", "N571", "IVOXI", "P699", "ORMID"],
        "MENSA-TOSNA": [
          "MENSA",
          "N571",
          "IVOXI",
          "P699",
          "EGTAG",
          "Q576",
          "RORON",
          "M430",
          "TOSNA",
        ],
        "MENSA-TUMAK": ["MENSA", "N571", "IVOXI", "M557", "TUMAK"],
        "MUSAP-KUMUN": ["MUSAP", "R401", "NORGA", "P574", "KUMUN"],
        "NALPO-GABKO": [
          "NALPO",
          "P559",
          "AMBOV",
          "Q322",
          "LOVEM",
          "M318",
          "GABKO",
        ],
        "NALPO-LALDO": [
          "NALPO",
          "P559",
          "AMBOV",
          "Q322",
          "LOVEM",
          "M677",
          "LALDO",
        ],
        "NALPO-TARDI": [
          "NALPO",
          "P559",
          "AMBOV",
          "Q322",
          "LOVEM",
          "L223",
          "TARDI",
        ],
        "NALPO-TONVO": [
          "NALPO",
          "P559",
          "AMBOV",
          "Q322",
          "LOVEM",
          "Q572",
          "SERSA",
          "P307",
          "TONVO",
        ],
        "OBNET-GABKO": ["OBNET", "M677", "LOVEM", "M318", "GABKO"],
        "OBNET-LALDO": ["OBNET", "M677", "LALDO"],
        "OBNET-TARDI": ["OBNET", "M677", "LOVEM", "L223", "TARDI"],
        "OBNET-TONVO": [
          "OBNET",
          "M677",
          "LOVEM",
          "Q572",
          "SERSA",
          "P307",
          "TONVO",
        ],
        "ORSAR-LALDO": ["ORSAR", "R784", "KUSEN", "M677", "LALDO"],
        "ORSAR-TARDI": ["ORSAR", "R784", "TATLA", "L223", "TARDI"],
        "ORSAR-TONVO": [
          "ORSAR",
          "R784",
          "TOVIV",
          "Q321",
          "NOLSU",
          "P307",
          "TONVO",
        ],
        "OVONA-LABRI": ["OVONA", "N318", "LABRI"],
        "OVONA-RETAS": ["OVONA", "N318", "KAPUM", "N685", "RETAS"],
        "PATAT-ALPOB": ["PATAT", "L519", "IVOXI", "N571", "ALPOB"],
        "PATAT-ORMID": ["PATAT", "L519", "IVOXI", "P699", "ORMID"],
        "PATAT-TARDI": [
          "PATAT",
          "L519",
          "EGPEP",
          "L313",
          "KIPOK",
          "L223",
          "TARDI",
        ],
        "PATAT-TOSNA": [
          "PATAT",
          "L519",
          "IVOXI",
          "P699",
          "EGTAG",
          "Q576",
          "RORON",
          "M430",
          "TOSNA",
        ],
        "PATAT-TUMAK": ["PATAT", "L519", "IVOXI", "M557", "TUMAK"],
        "PEKEM-GABKO": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "PEDOG",
          "R401",
          "GABKO",
        ],
        "SIR-LALDO": ["SIR", "L223", "TATLA", "R784", "KUSEN", "M677", "LALDO"],
        "SIR-TARDI": ["SIR", "L223", "TARDI"],
        "SIR-TONVO": [
          "SIR",
          "L223",
          "TATLA",
          "R784",
          "TOVIV",
          "Q321",
          "NOLSU",
          "P307",
          "TONVO",
        ],
        "SODEX-ALPOB": ["SODEX", "N563", "ALPOB"],
        "SODEX-ORMID": ["SODEX", "N563", "IMGUX", "P699", "ORMID"],
        "SODEX-TOVOX": ["SODEX", "N563", "UMIBU", "P899", "TOVOX"],
        "SODEX-TUMAK": [
          "SODEX",
          "N563",
          "BOSEV",
          "Q565",
          "UKUVO",
          "G462",
          "TUMAK",
        ],
        "SOLUD-ALPOB": ["SOLUD", "P574", "RUKOR", "N571", "ALPOB"],
        "SOLUD-GABKO": ["SOLUD", "P574", "NORGA", "R401", "GABKO"],
        "SOLUD-KUMUN": ["SOLUD", "P574", "KUMUN"],
        "SOLUD-ORMID": [
          "SOLUD",
          "P574",
          "RUKOR",
          "N571",
          "IVOXI",
          "P699",
          "ORMID",
        ],
        "SOLUD-TUMAK": [
          "SOLUD",
          "P574",
          "RUKOR",
          "N571",
          "IVOXI",
          "M557",
          "TUMAK",
        ],
        "TANSU-GABKO": [
          "TANSU",
          "G783",
          "ASPED",
          "Q308",
          "PEDOG",
          "R401",
          "GABKO",
        ],
        "TOSNA-LABRI": ["TOSNA", "N685", "KAPUM", "N318", "LABRI"],
        "TOSNA-RETAS": [
          "TOSNA",
          "N685",
          "UMEVU",
          "Q415",
          "KAXOB",
          "N300",
          "GIDOB",
          "N685",
          "RETAS",
        ],

        //1.9.4. The following standard routings apply for traffic departing UAE airports:
        "OMAA,AD-ALPOB": ["BOSEV", "N563", "ALPOB"],
        "OMAA,AD-GABKO": ["TULON", "M318", "GABKO"],
        "OMAA,AD-KATIT": ["ATUDO", "M318", "KATIT"],
        "OMAA,AD-KUMUN": ["TULON", "M318", "TOVIV", "P574", "KUMUN"],
        "OMAA,AD-LABRI": ["KANIP", "N318", "LABRI"],
        "OMAA,AD-ORMID": ["BOSEV", "N563", "IMGUX", "P699", "ORMID"],
        "OMAA,AD-ORSAR": [
          "DAXIB",
          "Q563",
          "UKUVO",
          "DCT",
          "KIVUS",
          "DCT",
          "LUDAM",
          "DCT",
          "ORSAR",
        ],
        "OMAA,AD-PEKEM": [
          "ORNEL",
          "T560",
          "ELUDA",
          "G783",
          "RIGIL",
          "M628",
          "PEKEM",
        ],
        "OMAA,AD-RETAS": ["ORNEL", "N685", "RETAS"],
        "OMAA,AD-RIBOT": ["ATUDO", "M318", "GOLGU", "M550", "RIBOT"],
        "OMAA,AD-TANSU": ["ORNEL", "T560", "ELUDA", "G783", "TANSU"],
        "OMAA,AD-TOVOX": ["MEKRI", "P899", "TOVOX"],
        "OMAA,AD-TUMAK": ["DAXIB", "Q563", "UKUVO", "G462", "TUMAK"],
        "OMAL-ALPOB": ["ROVOS", "DCT", "ADV", "DCT", "BOSEV", "N563", "ALPOB"],
        "OMAL-GABKO": [
          "ROVOS",
          "G462",
          "ULODA",
          "DCT",
          "TULON",
          "M318",
          "GABKO",
        ],
        "OMAL-KATIT": [
          "ROVOS",
          "DCT",
          "ADV",
          "DCT",
          "VUXOD",
          "L519",
          "ATUDO",
          "M318",
          "KATIT",
        ],
        "OMAL-KUMUN": [
          "ROVOS",
          "G462",
          "ULODA",
          "DCT",
          "TULON",
          "M318",
          "TOVIV",
          "P574",
          "KUMUN",
        ],
        "OMAL-LABRI": ["LABRI"],
        "OMAL-ORMID": [
          "ROVOS",
          "DCT",
          "ADV",
          "DCT",
          "BOSEV",
          "N563",
          "IMGUX",
          "P699",
          "ORMID",
        ],
        "OMAL-PEKEM": ["DCT", "ELUDA", "G783", "RIGIL", "M628", "PEKEM"],
        "OMAL-RETAS": ["RETAS"],
        "OMAL-RIBOT": [
          "ROVOS",
          "DCT",
          "ADV",
          "DCT",
          "VUXOD",
          "L519",
          "ATUDO",
          "M318",
          "GOLGU",
          "M550",
          "RIBOT",
        ],
        "OMAL-TANSU": ["DCT", "ELUDA", "G783", "TANSU"],
        "OMAL-TOVOX": ["ROVOS", "DCT", "ADV", "DCT", "MEKRI", "P899", "TOVOX"],
        "OMAL-TUMAK": [
          "ROVOS",
          "DCT",
          "ADV",
          "DCT",
          "DAXIB",
          "Q563",
          "UKUVO",
          "G462",
          "TUMAK",
        ],
        "OMDB,DW,SJ-ALPOB": ["SENPA", "N571", "ALPOB"],
        "OMDB,DW,SJ-GABKO": ["DAVMO", "M318", "GABKO"],
        "OMDB,DW,SJ-KATIT": ["KUTLI", "L519", "ATUDO", "M318", "KATIT"],
        "OMDB,DW,SJ-KUMUN": ["DCT", "KUMUN"],
        "OMDB,DW,SJ-MEMTU": [
          "ANVIX",
          "R401",
          "GIDIS",
          "G783-",
          "UKRAG",
          "L710",
          "MEMTU",
        ],
        "OMDB,DW,SJ-ORMID": ["NABIX", "P699", "ORMID"],
        "OMDB,DW,SJ-ORSAR": [
          "RIDAP",
          "M557",
          "TOTKU",
          "DCT",
          "KIVUS",
          "DCT",
          "LUDAM",
          "DCT",
          "ORSAR",
        ],
        "OMDB,DW,SJ-PEKEM": [
          "ANVIX",
          "R401",
          "GIDIS",
          "G783-",
          "RIGIL",
          "M628-",
          "PEKEM",
        ],
        "OMDB,DW,SJ-RIBOT": [
          "KUTLI",
          "L519",
          "ATUDO",
          "M318",
          "GOLGU",
          "M550",
          "RIBOT",
        ],
        "OMDB,DW,SJ-TANSU": ["ANVIX", "R401", "GIDIS", "G783-", "TANSU"],
        "OMDB,DW,SJ-TARDI": ["ANVIX", "L223", "TARDI"],
        "OMDB,DW,SJ-TOSNA*": ["MIROT", "Q576", "RORON", "M430", "TOSNA"],
        "OMDB,DW,SJ-TOSNA": ["NABIX", "P699", "OXARI", "M430", "TOSNA"],
        "OMDB,DW,SJ-TUMAK": ["RIDAP", "M557", "TUMAK"],
        "OMDB,SJ-GOMTA": ["IVURO", "M428", "GOMTA"],
        "OMDB,SJ-LALDO": ["IVURO", "M677", "LALDO"],
        "OMDW-GOMTA": ["NOLSU", "M572", "GOMTA"],
        "OMDW-LALDO": ["NOLSU", "N300", "LALDO"],
        "OMFJ-ALPOB": ["SERSA", "L519", "IVOXI", "N571", "ALPOB"],
        "OMFJ-GABKO": [
          "KUSEN",
          "DCT",
          "EMOPI",
          "DCT",
          "ITLAP",
          "R401",
          "GABKO",
        ],
        "OMFJ-KATIT": ["SERSA", "L519", "ATUDO", "M318", "KATIT"],
        "OMFJ-ORMID": ["SERSA", "L519", "IVOXI", "P699", "ORMID"],
        "OMFJ-PEKEM": ["VAVIM", "G783", "RIGIL", "M628", "PEKEM"],
        "OMFJ-RIBOT": [
          "SERSA",
          "L519",
          "ATUDO",
          "M318",
          "GOLGU",
          "M550",
          "RIBOT",
        ],
        "OMFJ-TANSU": ["VAVIM", "G783-", "TANSU"],
        "OMFJ-TONVO": ["FJV", "DCT", "TONVO"],
        "OMFJ-TOSNA": [
          "SERSA",
          "L519",
          "IVOXI",
          "P699",
          "OXARI",
          "M430",
          "TOSNA",
        ],
        "OMFJ-TUMAK": ["SERSA", "L519", "IVOXI", "M557", "TUMAK"],
        "OMRK-ALPOB": ["PUVAL", "L519", "IVOXI", "N571", "ALPOB"],
        "OMRK-GABKO": ["ASNEK", "R401", "GABKO"],
        "OMRK-GOMTA": [
          "PUVAL",
          "DCT",
          "NADNI",
          "DCT",
          "IVURO",
          "M428",
          "GOMTA",
        ],
        "OMRK-KATIT": ["PUVAL", "L519", "ATUDO", "M318", "KATIT"],
        "OMRK-LALDO": [
          "PUVAL",
          "DCT",
          "NADNI",
          "DCT",
          "IVURO",
          "M677",
          "LALDO",
        ],
        "OMRK-MEMTU": [
          "PUVAL",
          "DCT",
          "RUKOR",
          "DCT",
          "ANVIX",
          "R401",
          "GIDIS",
          "G783-",
          "UKRAG",
          "L710",
          "MEMTU",
        ],
        "OMRK-ORMID": [
          "PUVAL",
          "L519",
          "IVOXI",
          "N571",
          "TUDIS",
          "P699",
          "ORMID",
        ],
        "OMRK-PEKEM": [
          "PUVAL",
          "DCT",
          "RUKOR",
          "DCT",
          "ANVIX",
          "R401",
          "GIDIS",
          "G783-",
          "RIGIL",
          "M628-",
          "PEKEM",
        ],
        "OMRK-RIBOT": [
          "PUVAL",
          "L519",
          "ATUDO",
          "M318",
          "GOLGU",
          "M550",
          "RIBOT",
        ],
        "OMRK-TANSU": [
          "PUVAL",
          "DCT",
          "RUKOR",
          "DCT",
          "ANVIX",
          "R401",
          "GIDIS",
          "G783-",
          "TANSU",
        ],
        "OMRK-TARDI": [
          "PUVAL",
          "DCT",
          "RUKOR",
          "DCT",
          "ANVIX",
          "L223",
          "TARDI",
        ],
        "OMRK-TOSNA": [
          "PUVAL",
          "L519",
          "IVOXI",
          "P699",
          "OXARI",
          "M430",
          "TOSNA",
        ],
        "OMRK-TUMAK": ["PUVAL", "L519", "IVOXI", "M557", "TUMAK"],

        //1.9.5. The following standard routings apply for traffic arriving at UAE international airports.
        "ASTOG-OMDB": ["ASTOG", "L305", "ITBUL", "M677", "VUTEB"],
        "ASTOG-OMDW": [
          "ASTOG",
          "L305",
          "KIVUS",
          "P559",
          "AMBOV",
          "Q322",
          "DATOB",
        ],
        "ASTOG-OMFJ": ["ASTOG", "L305", "EMOTA", "R784", "KUSEN"],
        "ASTOG-OMRK": ["ASTOG", "L305", "EMOTA", "R784", "ALSIL"],
        "ASTOG-OMSJ": ["ASTOG", "L305", "EMOTA", "R784", "GONVI"],
        "BUNDU-OMAA": ["BUNDU", "B415", "UKILI"],
        "BUNDU-OMAD": ["BUNDU", "B415", "EGPOG", "Q666", "GIDOB"],
        "BUNDU-OMAL": [
          "BUNDU",
          "B415",
          "EGPOG",
          "Q666",
          "GIDOB",
          "DCT",
          "ADV",
          "DCT",
          "KANIP",
        ],
        "ITRAX-OMAA,AD": ["ITRAX", "P899", "ROVOS"],
        "ITRAX-OMAL": ["ITRAX", "DCT", "VAVIM"],
        "KATIT-OMAA,AD": ["KATIT", "M318", "ATUDO"],
        "KATIT-OMAL": ["KATIT", "M318", "ATUDO", "DCT", "ADV", "DCT", "KANIP"],
        "KATIT-OMDB": ["KATIT", "M318", "RURAL", "Q317", "LORID"],
        "KATIT-OMDW": ["KATIT", "M318", "RURAL", "Q317", "LORID"],
        "KATIT-OMRK": [
          "KATIT",
          "M318",
          "RURAL",
          "Q317",
          "LORID",
          "DCT",
          "TOVIV",
          "DCT",
          "ALSIL",
        ],
        "KATIT-OMSJ": ["KATIT", "M318", "RURAL", "Q317", "LORID"],
        "KUPRO-OMAA": ["KUPRO", "N300", "KAXOB", "Q415", "UKILI"],
        "KUPRO-OMAD": ["KUPRO", "N300", "GIDOB"],
        "KUPRO-OMAL": ["KUPRO", "N300", "GIDOB", "DCT", "ADV", "DCT", "KANIP"],
        "MENSA-OMFJ": ["MENSA", "T509", "FJV"],
        "MENSA-OMRK": ["MENSA", "N317", "NADNI"],
        "MENSA-OMSJ": ["MENSA", "N317", "NOLSU"],
        "MUSAP-OMDB": [
          "MUSAP",
          "R401",
          "PEDOG",
          "Q308",
          "KIPOK",
          "Q568",
          "IMPED",
        ],
        "MUSAP-OMDW": ["MUSAP", "R401", "GIDIS"],
        "MUSAP-OMFJ": ["MUSAP", "R401", "PEDOG", "Q308", "RUDAT"],
        "MUSAP-OMRK": [
          "MUSAP",
          "R401",
          "PEDOG",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
          "N317",
          "NADNI",
        ],
        "MUSAP-OMSJ": [
          "MUSAP",
          "R401",
          "PEDOG",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
        ],
        "NALPO-OMDB": ["NALPO", "P559", "VUTEB"],
        "NALPO-OMDW": ["NALPO", "P559", "AMBOV", "Q322", "DATOB"],
        "NALPO-OMDW*": ["NALPO", "P559", "KIVUS", "G666", "ELOVU"],
        "NALPO-OMFJ": [
          "NALPO",
          "P559",
          "KIVUS",
          "L305",
          "EMOTA",
          "R784",
          "KUSEN",
        ],
        "NALPO-OMRK": [
          "NALPO",
          "P559",
          "KIVUS",
          "L305",
          "EMOTA",
          "R784",
          "ALSIL",
        ],
        "NALPO-OMSJ": [
          "NALPO",
          "P559",
          "KIVUS",
          "L305",
          "EMOTA",
          "R784",
          "GONVI",
        ],
        "OBNET-OMDB": ["OBNET", "M677", "VUTEB"],
        "OBNET-OMDW": ["OBNET", "M677", "ITBUL", "Q322", "DATOB"],
        "OBNET-OMDW*": ["OBNET", "M677", "LUDAM", "G666", "ELOVU"],
        "OBNET-OMFJ": [
          "OBNET",
          "M677",
          "ITBUL",
          "L305",
          "EMOTA",
          "R784",
          "KUSEN",
        ],
        "OBNET-OMRK": [
          "OBNET",
          "M677",
          "ITBUL",
          "L305",
          "EMOTA",
          "R784",
          "ALSIL",
        ],
        "OBNET-OMSJ": [
          "OBNET",
          "M677",
          "ITBUL",
          "L305",
          "EMOTA",
          "R784",
          "GONVI",
        ],
        "ORSAR-OMAA": ["ORSAR", "DCT", "UKILI"],
        "ORSAR-OMAA,AD*": ["ORSAR", "G666", "ELOVU"],
        "ORSAR-OMAA,AD": [
          "ORSAR",
          "R784",
          "TATLA",
          "L223",
          "VUTEB",
          "Q569",
          "OBREV",
          "Q311",
          "EMERU",
        ],
        "ORSAR-OMAD": ["ORSAR", "DCT", "GIDOB"],
        "ORSAR-OMAL": [
          "ORSAR",
          "R784",
          "TATLA",
          "L223",
          "VUTEB",
          "Q569",
          "OBREV",
          "Q311",
          "TONKI",
          "DCT",
          "KANIP",
        ],
        "ORSAR-OMDB": ["ORSAR", "R784", "TATLA", "L223", "VUTEB"],
        "ORSAR-OMDW*": ["ORSAR", "G666", "ELOVU"],
        "ORSAR-OMDW": ["ORSAR", "R784", "GONVI"],
        "ORSAR-OMFJ": ["ORSAR", "R784", "KUSEN"],
        "ORSAR-OMRK": ["ORSAR", "R784", "ALSIL"],
        "ORSAR-OMSJ": ["ORSAR", "R784", "GONVI"],
        "OVONA-OMAA": [
          "OVONA",
          "N318",
          "KAPUM",
          "Z522",
          "ALNEV",
          "Q415",
          "UKILI",
        ],
        "OVONA-OMAD": ["OVONA", "N318", "KAPUM", "N685", "GIDOB"],
        "OVONA-OMAL": [
          "OVONA",
          "N318",
          "KAPUM",
          "N685",
          "GIDOB",
          "DCT",
          "ADV",
          "DCT",
          "KANIP",
        ],
        "PASOV-OMDB": ["PASOV", "B540", "MIVEK", "P574", "IMPED"],
        "PASOV-OMDW": ["PASOV", "M564", "UMAMI"],
        "PASOV-OMRK": [
          "PASOV",
          "B540",
          "ORKOB",
          "T891",
          "NOLSU",
          "N317",
          "NADNI",
        ],
        "PASOV-OMSJ": ["PASOV", "B540", "ORKOB", "T891", "NOLSU"],
        "PATAT-OMAA,AD": ["PATAT", "L519", "IVOXI", "Q311", "EMERU"],
        "PATAT-OMAL": [
          "PATAT",
          "L519",
          "IVOXI",
          "Q311",
          "TONKI",
          "DCT",
          "KANIP",
        ],
        "PATAT-OMDB,SJ,DW": ["PATAT", "L519", "PUVAL"],
        "PATAT-OMFJ": [
          "PATAT",
          "L519",
          "EGPEP",
          "DCT",
          "EMOPI",
          "R784",
          "KUSEN",
        ],
        "PATAT-OMRK": ["PATAT", "L519", "EGPEP"],
        "PEKEM-OMAA,AD": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "VAVIM",
          "P899",
          "ROVOS",
        ],
        "PEKEM-OMAL": ["PEKEM", "M628", "RIGIL", "G783", "VAVIM"],
        "PEKEM-OMDB": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "KIPOK",
          "Q568",
          "IMPED",
        ],
        "PEKEM-OMDW": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "PEDOG",
          "R401",
          "GIDIS",
        ],
        "PEKEM-OMFJ": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "RUDAT",
        ],
        "PEKEM-OMRK": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
          "N317",
          "NADNI",
        ],
        "PEKEM-OMSJ": [
          "PEKEM",
          "M628",
          "RIGIL",
          "G783",
          "ASPED",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
        ],
        "RIBOT-OMAA,AD": ["RIBOT", "M550", "GOLGU", "M318", "ATUDO"],
        "RIBOT-OMAL": [
          "RIBOT",
          "M550",
          "GOLGU",
          "M318",
          "ATUDO",
          "DCT",
          "ADV",
          "DCT",
          "KANIP",
        ],
        "RIBOT-OMDB,SJ": [
          "RIBOT",
          "M550",
          "GOLGU",
          "M318",
          "RURAL",
          "Q317",
          "LORID",
        ],
        "RIBOT-OMDW": [
          "RIBOT",
          "M550",
          "GOLGU",
          "M318",
          "RURAL",
          "Q317",
          "LORID",
        ],
        "RIBOT-OMRK": [
          "RIBOT",
          "M550",
          "GOLGU",
          "M318",
          "RURAL",
          "Q317",
          "LORID",
          "DCT",
          "TOVIV",
          "DCT",
          "ALSIL",
        ],
        "SODEX-OMAA,AD": ["SODEX", "N563", "NOBTO"],
        "SODEX-OMAL": ["SODEX", "N563", "ELUDA", "G783", "VAVIM"],
        "SOLUD-OMDB": ["SOLUD", "P574", "GISMO", "P574", "IMPED"],
        "TANSU-OMAA,AD": ["TANSU", "G783", "VAVIM", "P899", "ROVOS"],
        "TANSU-OMAL": ["TANSU", "G783", "VAVIM"],
        "TANSU-OMDB": [
          "TANSU",
          "G783",
          "ASPED",
          "Q308",
          "KIPOK",
          "Q568",
          "IMPED",
        ],
        "TANSU-OMDW": [
          "TANSU",
          "G783",
          "ASPED",
          "Q308",
          "PEDOG",
          "R401",
          "GIDIS",
        ],
        "TANSU-OMFJ": ["TANSU", "G783", "ASPED", "Q308", "RUDAT"],
        "TANSU-OMRK": [
          "TANSU",
          "G783",
          "ASPED",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
          "N317",
          "NADNI",
        ],
        "TANSU-OMSJ": [
          "TANSU",
          "G783",
          "ASPED",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
        ],
        "TAPRA-OMDB": ["TAPRA", "M762", "MIVEK", "P574", "IMPED"],
        "TAPRA-OMDW": ["TAPRA", "M762", "VAXAS", "M564", "UMAMI"],
        "TOSNA-OMAA": ["TOSNA", "N685", "UMEVU", "Q415", "UKILI"],
        "TOSNA-OMAD": ["TOSNA", "N685", "GIDOB"],
        "TOSNA-OMAL": ["TOSNA", "N685", "GIDOB", "DCT", "ADV", "DCT", "KANIP"],
        "VAXAS-OMDB": ["VAXAS", "M762", "MIVEK", "P574", "IMPED"],
        "VAXAS-OMDW": ["VAXAS", "M564", "UMAMI"],
        "VAXAS-OMRK": [
          "VAXAS",
          "M762",
          "RUDAT",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
          "N317",
          "NADNI",
        ],
        "VAXAS-OMSJ": [
          "VAXAS",
          "M762",
          "RUDAT",
          "Q308",
          "ORKOB",
          "T891",
          "NOLSU",
        ],

        //FRA routes-------------------------
        "BUNDU-LABRI-FRA": ["BUNDU", "DCT", "LABRI"],
        "BUNDU-LABRI*-FRA": ["BUNDU", "B415", "UKILI", "DCT", "LABRI"],
        "BUNDU-OMAA-FRA": ["BUNDU", "DCT", "EGPOG", "B415", "UKILI"],
        "BUNDU-OMAD-FRA": ["BUNDU", "DCT", "EGPOG", "Q666", "GIDOB"],
        "BUNDU-OMAL-FRA": [
          "BUNDU",
          "DCT",
          "EGPOG",
          "Q666",
          "GIDOB",
          "DCT",
          "ADV",
          "DCT",
          "KANIP",
        ],
        "BUNDU-RETAS-FRA": ["BUNDU", "DCT", "NAPMA", "N685", "RETAS"],
        "BUNDU-TONVO-FRA": ["BUNDU", "DCT", "GIDOB", "DCT", "TONVO"],
        "BUNDU-TONVO*-FRA": ["BUNDU", "B415", "UKILI", "DCT", "TONVO"],
        "GISMO-ALPOB-FRA": ["GISMO", "DCT", "TUDIS", "N571", "ALPOB"],
        "GISMO-GABKO-FRA": ["GISMO", "DCT", "GABKO"],
        "GISMO-KUMUN-FRA": ["GISMO", "DCT", "KUMUN"],
        "GISMO-ORMID-FRA": ["GISMO", "DCT", "EGTAG", "P699", "ORMID"],
        "GISMO-TUMAK-FRA": ["GISMO", "DCT", "MITIX", "M557", "TUMAK"],
        "ITRAX-ALPOB-FRA": [
          "ITRAX",
          "DCT",
          "ORBOL",
          "G462",
          "UKUVO",
          "Q563",
          "IMGUX",
          "N563",
          "ALPOB",
        ],
        "ITRAX-ORMID-FRA": [
          "ITRAX",
          "DCT",
          "ORBOL",
          "G462",
          "UKUVO",
          "Q563",
          "IMGUX",
          "P699",
          "ORMID",
        ],
        "ITRAX-TOVOX*-FRA": ["ITRAX", "DCT", "UMIBU", "P899", "TOVOX"],
        "ITRAX-TOVOX-FRA": ["ITRAX", "DCT", "TOVOX"],
        "ITRAX-TUMAK-FRA": ["ITRAX", "DCT", "ORBOL", "G462", "TUMAK"],
        "KUPRO-LALDO*-FRA": ["KUPRO", "N300", "GIDOB", "DCT", "LALDO"],
        "KUPRO-LALDO-FRA": ["KUPRO", "DCT", "GIDOB", "DCT", "LALDO"],
        "KUPRO-TONVO-FRA": ["KUPRO", "DCT", "GIDOB", "DCT", "TONVO"],
        "KUPRO-TONVO*-FRA": ["KUPRO", "N300", "GIDOB", "DCT", "TONVO"],
        "LALDO-ALPOB-FRA": ["LALDO", "DCT", "TUDIS", "N571", "ALPOB"],
        "LALDO-ORMID-FRA": ["LALDO", "DCT", "EGTAG", "P699", "ORMID"],
        "LALDO-TOSNA-FRA": [
          "LALDO",
          "DCT",
          "EGTAG",
          "Q576",
          "RORON",
          "M430",
          "TOSNA",
        ],
        "LALDO-TUMAK-FRA": ["LALDO", "DCT", "MITIX", "M557", "TUMAK"],
        "MENSA-ALPOB-FRA": ["MENSA", "DCT", "TUDIS", "N571", "ALPOB"],
        "MENSA-ORMID-FRA": ["MENSA", "DCT", "EGTAG", "P699", "ORMID"],
        "MENSA-TOSNA-FRA": ["MENSA", "DCT", "EGTAG", "Q576", "RORON", "M430", "TOSNA",],
        "MENSA-TUMAK-FRA": ["MENSA", "DCT", "MITIX", "M557", "TUMAK"],
        "NALPO-LALDO-FRA": ["NALPO", "DCT", "LALDO"],
        "NALPO-TARDI-FRA": ["NALPO", "DCT", "LOVEM", "DCT", "TARDI"],
        "NALPO-TARDI*-FRA": [
          "NALPO",
          "DCT",
          "LOVEM",
          "DCT",
          "ANVIX",
          "L223",
          "TARDI",
        ],
        "NALPO-TONVO-FRA": ["NALPO", "DCT", "TONVO"],
        "OBNET-LALDO-FRA": ["OBNET", "DCT", "TOVIV", "DCT", "LALDO"],
        "OBNET-TARDI-FRA": ["OBNET", "DCT", "IVOXI", "DCT", "TARDI"],
        "OBNET-TARDI*-FRA": [
          "OBNET",
          "DCT",
          "IVOXI",
          "DCT",
          "ANVIX",
          "L223",
          "TARDI",
        ],
        "OBNET-TONVO-FRA": ["OBNET", "DCT", "TONVO"],
        "ORSAR-LALDO-FRA": [
          "ORSAR",
          "DCT",
          "GIBIB",
          "DCT",
          "TOVIV",
          "DCT",
          "LALDO",
        ],
        "ORSAR-TARDI-FRA": ["ORSAR", "DCT", "LAGTA", "DCT", "TARDI"],
        "ORSAR-TARDI*-FRA": [
          "ORSAR",
          "DCT",
          "LAGTA",
          "DCT",
          "ANVIX",
          "L223",
          "TARDI",
        ],
        "ORSAR-TONVO-FRA": ["ORSAR", "DCT", "GIBIB", "DCT", "TONVO"],
        "OVONA-LABRI-FRA": ["OVONA", "DCT", "KAPUM", "DCT", "LABRI"],
        "OVONA-RETAS-FRA": ["OVONA", "DCT", "NAPMA", "N685", "RETAS"],
        "PATAT-ALPOB-FRA": ["PATAT", "DCT", "TUDIS", "N571", "ALPOB"],
        "PATAT-OMAA ,AD-FRA": [
          "PATAT",
          "DCT",
          "ITLAP",
          "L519",
          "IVOXI",
          "Q311",
          "EMERU",
        ],
        "PATAT-OMAL-FRA": [
          "PATAT",
          "DCT",
          "ITLAP",
          "L519",
          "IVOXI",
          "Q311",
          "TONKI",
          "DCT",
          "KANIP",
        ],
        "PATAT-ORMID-FRA": ["PATAT", "DCT", "EGTAG", "P699", "ORMID"],
        "PATAT-TARDI-FRA": ["PATAT", "DCT", "TARDI"],
        "PATAT-TARDI*-FRA": ["PATAT", "DCT", "ANVIX", "L223", "TARDI"],
        "PATAT-TOSNA-FRA": [
          "PATAT",
          "DCT",
          "EGTAG",
          "Q576",
          "RORON",
          "M430",
          "TOSNA",
        ],
        "PATAT-TUMAK-FRA": ["PATAT", "DCT", "MITIX", "M557", "TUMAK"],
        "SIR-LALDO-FRA": [
          "SIR",
          "DCT",
          "TATLA",
          "DCT",
          "TOVIV",
          "DCT",
          "LALDO",
        ],
        "SIR-TARDI-FRA": ["SIR", "DCT", "TARDI"],
        "SIR-TARDI*-FRA": ["SIR", "DCT", "ANVIX", "L223", "TARDI"],
        "SIR-TONVO-FRA": ["SIR", "DCT", "TATLA", "DCT", "TONVO"],
        "SODEX-ALPOB-FRA": ["SODEX", "DCT", "BOSEV", "N563", "ALPOB"],
        "SODEX-ORMID-FRA": [
          "SODEX",
          "DCT",
          "BOSEV",
          "N563",
          "IMGUX",
          "P699",
          "ORMID",
        ],
        "SODEX-TOVOX-FRA": ["SODEX", "DCT", "UMIBU", "DCT", "TOVOX"],
        "SODEX-TOVOX*-FRA": ["SODEX", "DCT", "UMIBU", "P899", "TOVOX"],
        "SODEX-TUMAK-FRA": ["SODEX","DCT","BOSEV","Q565","UKUVO","G462","TUMAK",],
        "TOSNA-LABRI-FRA": ["TOSNA", "DCT", "LABRI"],
        "TOSNA-RETAS-FRA": ["TOSNA", "DCT", "NAPMA", "N685", "RETAS"],
      };

      const CFL_XFL = {
        "ASTOG-OMDB": { CFL: "F210 or Below", XFL: "A100" },
        "ASTOG-OMDW": { CFL: "F210 or Below", XFL: "F160" },
        "ASTOG-OMFJ": { CFL: "F210 or Below", XFL: "A100" },
        "ASTOG-OMRK": { CFL: "F210 or Below", XFL: "A100" },
        "ASTOG-OMSJ": { CFL: "F210 or Below", XFL: "A090" },
        "BUNDU-OMAA": { CFL: "F350 or Below", XFL: "A120" },
        "BUNDU-OMAD": { CFL: "F350 or Below", XFL: "A100" },
        "OMAA,AD-GABKO": {
          CFL: "F150",
          XFL: "RFL",
          REMARKS: "K for Krachi FIR",
        },
        "BUNDU-LABRI": {
          CFL: "RFL / F270 if Dep Doha",
          XFL: "RFL",
          REMARKS:
            "Overflying Muscat FIR or with destination other than OOMS/OOMN/OOSH",
        },
        "BUNDU-RETAS": {
          CFL: "RFL / F270 if Dep Doha",
          XFL: "F330 or Below",
          REMARKS:
            "Destinations OOMS/OOMN/OOSH. <br>FL 330 or below for OOMS/OOMN and FL 230 for OOSH",
        },
        "OMAA,AD-TUMAK": { CFL: "F150", XFL: "RFL" },
        "OMAA,AD-ORMID": {
          CFL: "F150",
          XFL: "F260 or Below Crusing",
          REMARKS: "Destinations: OBBI, OBBS, OBKH, OEDF and OEDR",
        },
      };

      // Array (sector info library) to store rows ------------------
      const sectorData = [
        { sector: "SOUTH", limit: "GND - F600", freq: "128.250" },
        { sector: "LIMA", limit: "GND - F600", freq: "125.925" },
        { sector: "BRAVO", limit: "GND - F600", freq: "119.325" },
        { sector: "NORTH", limit: "GND - F600", freq: "132.150" },
        { sector: "MIKE", limit: "GND - F600", freq: "132.550" },
        { sector: "CENTRAL", limit: "GND - F600", freq: "124.375" },
        { sector: "DELTA", limit: "GND - F255", freq: "120.900" },
        { sector: "HOTEL", limit: "GND - F255", freq: "128.125" },
        { sector: "ALPHA", limit: "GND - F255", freq: "129.500" },
        { sector: "EAST", limit: "GND - F255", freq: "125.375" },
        { sector: "ROMEO", limit: "GND - F255", freq: "124.850" },
        { sector: "GOLF", limit: "GND - F245", freq: "120.525" },
        { sector: "WEST", limit: "GND - F245", freq: "119.300" },
        { sector: "YANKEE", limit: "A095 - F195", freq: "118.925" },
      ];

      //hold info library --------------------------------
      const holdingLibrary = [
        {
          point: "ITLAP",
          heading: 204,
          leg: 6,
          turn: "Left",
          outboundHeading: 024,
          limit: "A100 - F180",
        },
        {
          point: "VUTEB",
          heading: 107,
          leg: 8,
          turn: "Right",
          outboundHeading: 287,
          limit: "A100 - F250",
        },
        {
          point: "IMPED",
          heading: 298,
          leg: 8,
          turn: "Right",
          outboundHeading: 118,
          limit: "A100 - F250",
        },
        {
          point: "ALNEV",
          heading: 117,
          leg: 8,
          turn: "Right",
          outboundHeading: 297,
          limit: "A100 - F220",
        },
        {
          point: "ROVOS",
          heading: 280,
          leg: 7,
          turn: "Right",
          outboundHeading: 100,
          limit: "A100 - F160",
        },
      ];

      // --- Prohibited Category  Library ------------------------
      const prohibitatedAreas = [
        {
          shapeName: "OMP_48 Argoob",
          shapeType: "circle",
          coords: ["243850.46N", "0550715.30E"],
          radiusNm: 5,
          limit: "UNL - GND",
          type: "Permanent, Military activity extremely hazardous to aircraft",
        },
        {
          shapeName: "OMP_108 Tawilah",
          shapeType: "circle",
          coords: ["244041N", "0544152E"],
          radiusNm: 3,
          limit: "FL220 - GND",
          type: "Permanent, Controlled by Air Operations Center.",
        },

        //sample of rectangle shape
        /*{shapeName: "Rectangle A3", shapeType: "rectangle",
            corner1: ["252400N","0562000E"],
            corner2: ["252500N","0562100E"],
            limit: "Surface – 8,000ft",
            type: "Danger"
          }*/
      ];

      // --- Restricted Category Library -----------------------
      const restrictedAreas = [
        {
          shapeName: "OIR_38 Siri_Island",
          shapeType: "circle",
          coords: ["255420N", "0543320E"],
          radiusNm: 12,
          limit: "12,000ft AMSL - GND",
          type: "Permanent",
        },
        {
          shapeName: "OMR_51 Minhad_Trng_Area",
          shapeType: "polygon",
          coords: [
            ["245630.00N", "0551155.00E"],
            ["244755.14N", "0554814.67E"],
            ["244303.89N", "0554813.77E"],
            ["244044.20N", "0554813.34E"],
            ["243500.00N", "0554413.00E"],
            ["242923.17N", "0554558.61E"],
            ["242437.88N", "0554124.58E"],
            ["242943.38N", "0551411.55E"],
            ["243429.76N", "0551331.68E"],
            ["243335.74N", "0550548.57E"],
            ["243447.39N", "0550401.23E"],
            ["243824.15N", "0550147.31E"],
            ["244009.93N", "0550137.10E"],
            ["245630.00N", "0551155.00E"],
          ],
          limit: "FL300 - FL155",
          type: "Activity notified by UAE ACC, When active: Controlled by AL MAKTOUM RADAR,\n Contact 124.025 MHz before entering Military jet training",
        },
        {
          shapeName: "OMR_53 Minhad_Trng_Area",
          shapeType: "polygon",
          coords: [
            ["244134.55N", "0551221.09E"],
            ["244030.00N", "0551430.00E"],
            ["243453.00N", "0552421.00E"],
            ["243500.00N", "0552700.00E"],
            ["243500.41N", "0553519.70E"],
            ["243500.00N", "0554413.00E"],
            ["242324.51N", "0554750.88E"],
            ["242534.00N", "0553628.00E"],
            ["242804.83N", "0552301.05E"],
            ["242943.38N", "0551411.55E"],
            ["243429.76N", "0551331.68E"],
            ["244134.55N", "0551221.09E"],
          ],
          limit: "FL155 - GND",
          type: "Activity notified by UAE ACC, When active: Controlled by DUBAI SOUTH RADAR,\n Contact 120.400 MHz before entering Military jet training",
        },
        {
          shapeName: "OMR_67 Ras_Al_Kheimah",
          shapeType: "polygon",
          coords: [
            ["253530N", "0562150E"],
            ["252500N", "0562150E"],
            ["252500N", "0555958E"],
            ["252800N", "0554500E"],
            ["255230N", "0560130E"],
            ["255316N", "0560729E"],
            ["253549N", "0561011E"],
            ["253613N", "0561945E"],
            ["253530N", "0562150E"],
          ],
          limit: "FL300 - 9,500ft AGL",
          type: "Activity notified by UAE ACC, High level military jet training",
        },
      ];

      // -Danger Category Library ---
      const dangerAreas = [
        /*{
          shapeName: "Circle C1",
          shapeType: "circle",
          coords: ["251200N","0554000E"],
          radiusNm: 2,
          limit: "FL60 – FL120",
          type: "Temporary"
        },*/
        {
          shapeName: "OMD_22 Sea_Range_Charlie",
          shapeType: "polygon",
          coords: [
            ["250330N", "0541625E"],
            ["251200N", "0542210E"],
            ["250713N", "0543130E"],
            ["245830N", "0542545E"],
            ["250330N", "0541625E"],
          ],
          limit: "FL300 - GND	",
          type: "NOTAM, Air to Air towed target gunnery and Naval gunnery practice,\n Controlled by UAE ACC ",
        },
        {
          shapeName: "OMD_24 Bargat_Al_Hagat",
          shapeType: "polygon",
          coords: [
            ["243429.76N", "0551331.68E"],
            ["242931.08N", "0551413.26E"],
            ["242839.42N", "0550708.58E"],
            ["243008.88N", "0550517.88E"],
            ["243328.80N", "0550449.32E"],
            ["243429.76N", "0551331.68E"],
          ],
          limit: "FL220 - GND	",
          type: "NOTAM - Controlled by AUH APP",
        },
      ];

      // -Training Category Library ---
      const trainingAreas = [
        {
          shapeName: "TRNG_A",
          shapeType: "polygon",
          coords: [
            ["253026N", "0533441E"],
            ["252203N", "0532838E"],
            ["250534N", "0535616E"],
            ["251355N", "0540220E"],
            ["253026N", "0533441E"],
          ],
          limit: "13,000ft AMSL - 6,000ft AMSL",
          type: "Civil Training Flights, Activity notified by UAE ACC,\n When active: Controlled by UAE ACC, Contact: 120.525 Mhz",
        },
        {
          shapeName: "TRNG_B",
          shapeType: "polygon",
          coords: [
            ["251341N", "0532237E"],
            ["252203N", "0532838E"],
            ["250534N", "0535616E"],
            ["245711N", "0535012E"],
            ["251341N", "0532237E"],
          ],
          limit: "13,000ft AMSL - 6,000ft AMSL",
          type: "Civil Training Flights, Activity notified by UAE ACC,\n When active: Controlled by UAE ACC, Contact: 120.525 Mhz",
        },
      ];

      // Function to render table from sectorData
      function renderSectorTable() {
        const tbody = document.querySelector("#sectorTable tbody");
        tbody.innerHTML = ""; // clear old rows

        sectorData.forEach((row) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
        <td>${row.sector}</td>
        <td>${row.limit}</td>
        <td>${row.freq}</td>
      `;
          tbody.appendChild(tr);
        });
      }

      // Call once on load
      renderSectorTable();

      // --- Table toggle logic ---
      const toggleBtn = document.getElementById("toggleTableBtn");
      const tablePanel = document.getElementById("sectorTablePanel");

      toggleBtn.addEventListener("click", () => {
        if (tablePanel.style.display === "none") {
          tablePanel.style.display = "block";
          toggleBtn.textContent = "Sector Info ▼";
        } else {
          tablePanel.style.display = "none";
          toggleBtn.textContent = "Sector Info ▸";
        }
      });

      function toggleSectorPanel() {
        const panel = document.getElementById("sectorOptions");
        const header = document.getElementById("sectorHeader");

        if (panel.style.display === "none") {
          panel.style.display = "block";
          header.innerText = "Sectors ▼";
        } else {
          panel.style.display = "none";
          header.innerText = "Sectors ▸";
        }
      }

      //----------------------------------------------------------------------------
 /*
    const baseMapLayer = L.tileLayer(
      'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
      {
        attribution: '&copy; <a href="https://carto.com/">CARTO</a>',
        subdomains: 'abcd',
        maxZoom: 19,
        opacity: 0.6
      }
    );

     const baseMapLayer = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
       {
         opacity: 0.8
       }
     );
*/
      const baseMapLayer = L.tileLayer(
        "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",
        {
          attribution: "Tiles © Esri",
          maxZoom: 19,
          opacity: 0.7, // Adjust transparency here (0 = fully transparent, 1 = opaque)
        }
      );

      const routeMap = {};
      for (const key in routes) {
        const [from, to] = key.split("-");
        if (!routeMap[from]) routeMap[from] = {};
        routeMap[from][to] = routes[key];
      }

      const airwayColors = [
        "#F7663F",
        "#3DA0F1",
        "#52E747",
        "#FBD329",
        "#7373F1",
        "#17F5CB",
      ];

      let extraLabelMarkers = [];

      //-------------------------------------
      function expandRoute(routeSeq, airwaysDict) {
        const expanded = [];

        for (let i = 0; i < routeSeq.length; i++) {
          const item = routeSeq[i];

          if (airwaysDict[item]) {
            let entry = null;
            let exit = null;

            // Look back for entry point
            for (let j = i - 1; j >= 0; j--) {
              if (!airwaysDict[routeSeq[j]]) {
                entry = routeSeq[j];
                break;
              }
            }

            // Look forward for exit point
            for (let j = i + 1; j < routeSeq.length; j++) {
              if (!airwaysDict[routeSeq[j]]) {
                exit = routeSeq[j];
                break;
              }
            }

            const airway = airwaysDict[item];
            let s = airway.indexOf(entry);
            let e = airway.indexOf(exit);

            if (s !== -1 && e !== -1) {
              let segment = airway.slice(Math.min(s, e), Math.max(s, e) + 1);
              if (s > e) segment.reverse();
              if (expanded.length && expanded.at(-1) === segment[0])
                segment.shift();
              expanded.push(...segment);
            }
          } else {
            if (!expanded.includes(item)) expanded.push(item);
          }
        }
        return expanded;
      }
      //-------------------------------------------
      let currentRouteFilter = "Arr";

      function filterRoutes(type) {
        currentRouteFilter = type;
        document
          .querySelectorAll(".filter-btn")
          .forEach((btn) => btn.classList.remove("selected"));
        document
          .querySelector(`.filter-btn[onclick="filterRoutes('${type}')"]`)
          .classList.add("selected");
        populateRouteButtons();
      }
      //-------------------------------------------
      function getSelectedSectors() {
        return Array.from(
          document.querySelectorAll(
            '#sectorOptions input[type="checkbox"]:checked'
          )
        ).map((cb) => cb.value);
      }

      //---------------------------------------
      function populateRouteButtons() {
        const list = document.getElementById("routeList");
        list.innerHTML = "";

        const selectedSectors = getSelectedSectors(); //You already have this

        const routePairs = [];

        Object.entries(routes).forEach(([key, value]) => {
          const isFRA = key.endsWith("-FRA");

          // Filter logic by route type
          const [from, to] = key.split("-");
          const isArr = to.startsWith("OM");
          const isDep = from.startsWith("OM");
          const isOvf = !isArr && !isDep;

          let matchesType = false;
          if (currentRouteFilter === "FRA") {
            matchesType = isFRA;
          } else if (currentRouteFilter === "Arr") {
            matchesType = isArr && !isFRA;
          } else if (currentRouteFilter === "Dep") {
            matchesType = isDep && !isFRA;
          } else if (currentRouteFilter === "Ovf") {
            matchesType = isOvf && !isFRA;
          }

          if (!matchesType) return;

          //Filter by sector---------------
          if (selectedSectors.length > 0) {
            const routeSectorTags = routeSectors[key] || [];
            const intersects = routeSectorTags.some((tag) =>
              selectedSectors.includes(tag)
            );
            if (!intersects) return;
          }

          const label = isFRA ? key.replace("-FRA", "") : key;
          routePairs.push({ fullKey: key, label });
        });

        routePairs.sort((a, b) => a.label.localeCompare(b.label));

        routePairs.forEach(({ fullKey, label }) => {
          const btn = document.createElement("button");
          btn.textContent = label;
          btn.onclick = () => {
            document
              .querySelectorAll("#routeList button")
              .forEach((b) => b.classList.remove("selected-route"));
            btn.classList.add("selected-route");

            displayExpandedRouteByKey(fullKey); // ✅ your existing function
          };
          list.appendChild(btn);
        });
      }
      //-----------------------------
      function setExtraLabelColor(color) {
        document.querySelectorAll(".coord-label").forEach((label) => {
          label.style.color = color;
        });
      }

      //------------------------------------------
      const extraLatLngs = Object.entries(extraPoints)
        .map(([name, [latDMS, lonDMS]]) => ({
          name,
          lat: convertDMSToDecimal(latDMS),
          lon: convertDMSToDecimal(lonDMS),
        }))
        .filter((pt) => pt.lat !== null && pt.lon !== null);

      const map = L.map("map", {
        zoomControl: false,
        attributionControl: false,
        scrollWheelZoom: true,
        wheelPxPerZoomLevel: 200, // <-- Increase this for smoother zoom
        zoomSnap: 0, //  allow fractional zoom
        zoomDelta: 0.3, //  smallest step = 0.1
      }).setView(latlngs[0], 7);

      let mapLayerVisible = false;

      const zoomSlider = document.getElementById("zoomSlider");
      const zoomValue = document.getElementById("zoomValue");

      zoomSlider.value = map.getZoom();
      zoomValue.textContent = map.getZoom().toFixed(1);

      map.on("zoom", () => {
        zoomSlider.value = map.getZoom();
        zoomValue.textContent = map.getZoom().toFixed(1);
      });

      zoomSlider.addEventListener("input", () => {
        map.setZoom(parseFloat(zoomSlider.value));
        map.setZoom(z);
        zoomValue.textContent = z.toFixed(1);
      });

      document
        .getElementById("toggleMapBtn")
        .addEventListener("click", function () {
          if (mapLayerVisible) {
            map.removeLayer(baseMapLayer);
            coordLabelColor = "white";
          } else {
            baseMapLayer.addTo(map);
            coordLabelColor = "black";
          }

          document.querySelectorAll(".coord-label").forEach((label) => {
            label.style.color = coordLabelColor;
          });

          mapLayerVisible = !mapLayerVisible;
        });

      //draw main FIR boundary------------------------
      const polyline = L.polyline(latlngs, {
        color: "yellow",
        weight: 1.2,
        dashArray: "3 3",
      }).addTo(map);

      map.fitBounds(polyline.getBounds());

      let triangleLayers = [];

      function drawEquilateralTriangle(center, size) {
        const [lat, lon] = center;

        // Convert size (in degrees) to approximate deltas
        const height = size;
        const halfBase = size / Math.sqrt(3); // equilateral triangle rule

        const top = [lat + height / 2, lon];
        const left = [lat - height / 2, lon - halfBase];
        const right = [lat - height / 2, lon + halfBase];

        return L.polygon([top, left, right], {
          color: "grey",
          weight: 1.5,
          fill: false,
        }).addTo(map);
      }

      //join airways between points-thin grey line--------------------------

      function drawairways() {
        Object.entries(airways).forEach(([routeName, pointNames]) => {
          const latlngs = pointNames
            .map((name) => extraPoints[name])
            .filter((pt) => pt)
            .map((pt) => [
              convertDMSToDecimal(pt[0]),
              convertDMSToDecimal(pt[1]),
            ]);

          if (latlngs.length >= 2) {
            L.polyline(latlngs, {
              color: "#737373", // "darkcyan",
              weight: 1.3,
              opacity: 0.5,
              //dashArray: '4 4' // optional: dashed lines
            }).addTo(map);
          }
        });
      }

      //draw fix triangles----------------------
      function renderTriangles() {
        triangleLayers.forEach((layer) => map.removeLayer(layer));
        triangleLayers = [];

        const zoom = map.getZoom();
        const baseSize = 0.05;
        const scale = Math.pow(2, 7 - zoom);
        const size = baseSize * scale;

        // Display triangles on extraPoints
        extraLatLngs.forEach((pt) => {
          const triangle = drawEquilateralTriangle([pt.lat, pt.lon], size);
          triangleLayers.push(triangle);
        });
      }

      //---------------------------
      let holdingLayers = [];
      let holdingMarkers = [];
      let holdingsVisible = false;

      // -------------------------------------------------
      // Draw holding pattern
      // -------------------------------------------------
      function drawHoldingPattern(
        pointName,
        inboundHeadingDeg,
        legLengthNm = 10,
        turn = "right",
        turnRadiusNm = 2,
        limit = ""
      ) {
        const pt = extraPoints[pointName];
        if (!pt) {
          console.warn("Point not found:", pointName);
          return;
        }

        const lat = convertDMSToDecimal(pt[0]);
        const lon = convertDMSToDecimal(pt[1]);
        const fix = L.latLng(lat, lon);

        // Conversion helpers
        const nmToDegLat = 1 / 60;
        const nmToDegLon = (nm, lat) =>
          nm / (60 * Math.cos((lat * Math.PI) / 180));

        // Headings
        const inboundRad = (inboundHeadingDeg * Math.PI) / 180;
        const outboundHeadingDeg = (inboundHeadingDeg + 180) % 360;
        const outboundRad = (outboundHeadingDeg * Math.PI) / 180;

        // Turn direction factor (+1 for right/clockwise, -1 for left/counter-clockwise)
        const dir = turn.toLowerCase() === "right" ? 1 : -1;

        // Arc builder
        function buildArc(center, startAngle, turnDir, radiusNm, steps = 20) {
          const arcPts = [];
          const step = (Math.PI / steps) * turnDir;
          for (let i = 0; i <= steps; i++) {
            const ang = startAngle + i * step;
            const dx = Math.sin(ang) * radiusNm;
            const dy = Math.cos(ang) * radiusNm;
            const la = center.lat + dy * nmToDegLat;
            const lo = center.lng + nmToDegLon(dx, center.lat);
            arcPts.push([la, lo]);
          }
          return arcPts;
        }

        // --- Build racetrack ---

        // 1. First 180° turn at fix
        const perp_offset = turn.toLowerCase() === "right" ? 90 : -90;
        const perpDir = inboundHeadingDeg + perp_offset;
        const perpRad = (perpDir * Math.PI) / 180;

        const northNm = Math.cos(perpRad) * turnRadiusNm;
        const eastNm = Math.sin(perpRad) * turnRadiusNm;

        const centerLat = lat + northNm * nmToDegLat;
        const centerLng = lon + nmToDegLon(eastNm, lat);
        const center = L.latLng(centerLat, centerLng);

        const startAngle = perpRad + Math.PI;
        const firstArc = buildArc(center, startAngle, dir, turnRadiusNm);

        // Arc end = start of outbound leg
        const arcEnd = firstArc[firstArc.length - 1];

        // 2. Outbound leg (reciprocal)
        const northNmOut = Math.cos(outboundRad) * legLengthNm;
        const eastNmOut = Math.sin(outboundRad) * legLengthNm;

        const outboundEndLat = arcEnd[0] + northNmOut * nmToDegLat;
        const outboundEndLng = arcEnd[1] + nmToDegLon(eastNmOut, arcEnd[0]);
        const outboundEnd = [outboundEndLat, outboundEndLng];

        // 3. Second 180° turn
        const perpDir2 = outboundHeadingDeg + perp_offset;
        const perpRad2 = (perpDir2 * Math.PI) / 180;

        const northNm2 = Math.cos(perpRad2) * turnRadiusNm;
        const eastNm2 = Math.sin(perpRad2) * turnRadiusNm;

        const center2Lat = outboundEnd[0] + northNm2 * nmToDegLat;
        const center2Lng = outboundEnd[1] + nmToDegLon(eastNm2, outboundEnd[0]);
        const center2 = L.latLng(center2Lat, center2Lng);

        const startAngle2 = perpRad2 + Math.PI;
        const secondArc = buildArc(center2, startAngle2, dir, turnRadiusNm);

        // 4. Inbound leg → back to fix
        const patternPts = [
          ...firstArc,
          outboundEnd,
          ...secondArc.slice(1),
          [fix.lat, fix.lng],
        ];

        // --- Draw holding pattern line ---
        const holdLine = L.polyline(patternPts, {
          color: "red",
          weight: 2,
          dashArray: "6 4",
        }).addTo(map);
        holdingLayers.push(holdLine);

        // --- hold area marker with tooltip ---
        const fixMarker = L.circleMarker(fix, {
          radius: 4,
          color: "yellow",
          weight: 2,
          fillColor: "black",
          fillOpacity: 1,
        })
          .bindTooltip(
            `<b>${pointName}</b> - hold<br>Outbound: ${outboundHeadingDeg}° (${turn})<br>
     Limit: ${limit || "N/A"}`,
            {
              permanent: true,
              direction: "top",
              offset: [-40, -40],
              className: "holding-tooltip",
            }
          )
          .addTo(map);
        holdingLayers.push(fixMarker);
        holdingMarkers.push(fixMarker);

        // --- Arrow on outbound leg ---
        const midOutboundLat = (arcEnd[0] + outboundEnd[0]) / 2;
        const midOutboundLng = (arcEnd[1] + outboundEnd[1]) / 2;
        const midOutboundPoint = L.latLng(midOutboundLat, midOutboundLng);

        const arrowRotation = outboundHeadingDeg; // arrow pointing in outbound direction

        const arrowIcon = L.divIcon({
          className: "",
          iconSize: [16, 16],
          iconAnchor: [8, 8],
          html: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                 width="16" height="16"
                 style="transform: rotate(${arrowRotation}deg); fill: yellow;">
             <path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/>
           </svg>`,
        });

        // --- Arrow on inbound leg ---
        const arc2End = secondArc[secondArc.length - 1]; // end of 2nd arc
        const inboundMidLat = (arc2End[0] + fix.lat) / 2;
        const inboundMidLng = (arc2End[1] + fix.lng) / 2;
        const inboundMidPoint = L.latLng(inboundMidLat, inboundMidLng);

        const inboundRotation = inboundHeadingDeg; // arrow pointing in inbound direction

        const inboundArrowIcon = L.divIcon({
          className: "",
          iconSize: [16, 16],
          iconAnchor: [8, 8],
          html: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                 width="16" height="16"
                 style="transform: rotate(${inboundRotation}deg); fill: yellow;">
             <path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/>
           </svg>`,
        });

        const inboundArrowMarker = L.marker(inboundMidPoint, {
          icon: inboundArrowIcon,
        }).addTo(map);
        holdingLayers.push(inboundArrowMarker);

        const arrowMarker = L.marker(midOutboundPoint, {
          icon: arrowIcon,
        }).addTo(map);
        holdingLayers.push(arrowMarker);
      }
      // Draw/Clear all holdings ------------------------------------------------
      function drawAllHoldings() {
        holdingLibrary.forEach((h) =>
          drawHoldingPattern(h.point, h.heading, h.leg, h.turn, 2, h.limit)
        );
      }

      function clearAllHoldings() {
        holdingLayers.forEach((l) => map.removeLayer(l));
        holdingLayers = [];
        holdingMarkers = [];
      }

      // Toggle button for hold are visible ------------
      document
        .getElementById("showHoldingsBtn")
        .addEventListener("click", function () {
          if (holdingsVisible) {
            clearAllHoldings();
            this.textContent = "Holdings ▸";
          } else {
            drawAllHoldings();
            this.textContent = "Holdings ▼";
          }
          holdingsVisible = !holdingsVisible;
        });

      //danger areas selection pannel------------------------------
      let areasVisible = false;

      document
        .getElementById("toggleAreasBtn")
        .addEventListener("click", function () {
          const areasPanel = document.getElementById("areasPanel");
          if (areasVisible) {
            areasPanel.classList.remove("active");
            this.textContent = "Areas ▸";
          } else {
            areasPanel.classList.add("active");
            this.textContent = "Areas ▼";
          }
          areasVisible = !areasVisible;
        });

      function nmToMeters(nm) {
        return nm * 1852;
      }

      // Create layer groups
      const prohibitated = L.layerGroup();
      const restricted = L.layerGroup();
      const danger = L.layerGroup();
      const training = L.layerGroup();

      // ✅ Example using your convertDMSToDecimal function

      function dmsToLatLng(latDMS, lonDMS) {
        return [convertDMSToDecimal(latDMS), convertDMSToDecimal(lonDMS)];
      }

      // Function to update details panel
      function normalize(str = "") {
        return str.trim().replace(/\n/g, "<br>");
      }

      function showAreaDetails(area) {
        if (!document.getElementById("toggleDetails").checked) return;

        document.getElementById("areaName").innerHTML = area.shapeName;
        document.getElementById("areaLimit").innerHTML = normalize(area.limit);
        document.getElementById("areaType").innerHTML = normalize(area.type);
        document.getElementById("areaDetailsPanel").style.display = "block";
      }

      // Hide details if checkbox off
      document
        .getElementById("toggleDetails")
        .addEventListener("change", (e) => {
          document.getElementById("areaDetailsPanel").style.display = e.target
            .checked
            ? "block"
            : "none";
        });

      function renderAreas(areaList, layerGroup, color) {
        areaList.forEach((area) => {
          let shape;
          let center;

          switch (area.shapeType) {
            case "circle":
              if (!Array.isArray(area.coords) || area.coords.length !== 2) {
                console.error(
                  `Invalid coords for circle area "${area.shapeName}": must be an array [latDMS, lonDMS]`,
                  area
                );
                return;
              }
              center = dmsToLatLng(...area.coords);
              if (typeof area.radiusNm !== "number") {
                console.error(
                  `Invalid radiusNm for circle area "${area.shapeName}": must be a number`,
                  area
                );
                return;
              }
              shape = L.circle(center, {
                radius: nmToMeters(area.radiusNm),
                color,
                weight: 1, // Reduced thickness
              }).addTo(layerGroup);
              break;

            case "polygon":
              if (
                !Array.isArray(area.coords) ||
                area.coords.length < 3 ||
                !area.coords.every(
                  (coord) => Array.isArray(coord) && coord.length === 2
                )
              ) {
                console.error(
                  `Invalid coords for polygon area "${area.shapeName}": must be an array of at least 3 [latDMS, lonDMS] arrays`,
                  area
                );
                return;
              }
              const latlngs = area.coords.map(([lat, lon]) =>
                dmsToLatLng(lat, lon)
              );
              shape = L.polygon(latlngs, { color, weight: 1 }).addTo(
                layerGroup
              );
              center = shape.getBounds().getCenter();
              break;

            case "rectangle":
              if (
                !Array.isArray(area.corner1) ||
                area.corner1.length !== 2 ||
                !Array.isArray(area.corner2) ||
                area.corner2.length !== 2
              ) {
                console.error(
                  `Invalid corner1 or corner2 for rectangle area "${area.shapeName}": each must be an array [latDMS, lonDMS]`,
                  area
                );
                return;
              }
              const corner1 = dmsToLatLng(...area.corner1);
              const corner2 = dmsToLatLng(...area.corner2);
              shape = L.rectangle([corner1, corner2], {
                color,
                weight: 1,
              }).addTo(layerGroup);
              center = shape.getBounds().getCenter();
              break;

            default:
              console.error(
                `Unknown shapeType "${area.shapeType}" for area "${area.shapeName}"`,
                area
              );
              return;
          }

          if (center) {
            // Label
            L.marker(center, {
              icon: L.divIcon({
                className: "area-label",
                html: `<div style="color:${color}; font-weight:bold;">${area.shapeName}</div>`,
                iconSize: [0, 0],
              }),
            }).addTo(layerGroup);

            // Details panel on click
            shape.on("click", () => showAreaDetails(area, color));
          }
        });
      }

      renderAreas(prohibitatedAreas, prohibitated, "#FFFF66"); //yellow
      renderAreas(restrictedAreas, restricted, "#FEB476"); //orange
      renderAreas(dangerAreas, danger, "#FFBDFF"); //pink
      renderAreas(trainingAreas, training, "#BDEEEF");

      function showAreaDetails(area, color) {
        const detailsCheckbox = document.getElementById("toggleDetails");
        if (!detailsCheckbox.checked) {
          return; // Do not show if "Info" checkbox is not checked
        }

        const panel = document.getElementById("areaDetailsPanel");
        document.getElementById("areaName").textContent = area.shapeName;
        document.getElementById("areaLimit").textContent = area.limit;
        document.getElementById("areaType").textContent = area.type;
        panel.style.color = color; // Match the drawn area color
        panel.style.display = "block";
      }

      // Toggle logic for area checkboxes
      document
        .getElementById("toggleProhibitated")
        .addEventListener("change", (e) => {
          if (e.target.checked) map.addLayer(prohibitated);
          else map.removeLayer(prohibitated);
        });

      document
        .getElementById("toggleRestricted")
        .addEventListener("change", (e) => {
          if (e.target.checked) map.addLayer(restricted);
          else map.removeLayer(restricted);
        });

      document
        .getElementById("toggleDanger")
        .addEventListener("change", (e) => {
          if (e.target.checked) map.addLayer(danger);
          else map.removeLayer(danger);
        });

      document
        .getElementById("toggleTraining")
        .addEventListener("change", (e) => {
          if (e.target.checked) map.addLayer(training);
          else map.removeLayer(training);
        });

      // --- Make sector table -------------------------------------
      function makeDraggable(el) {
        let offsetX,
          offsetY,
          isDown = false;

        el.addEventListener("mousedown", (e) => {
          isDown = true;
          offsetX = el.offsetLeft - e.clientX;
          offsetY = el.offsetTop - e.clientY;
        });

        document.addEventListener("mouseup", () => (isDown = false));

        document.addEventListener("mousemove", (e) => {
          if (isDown) {
            el.style.left = e.clientX + offsetX + "px";
            el.style.top = e.clientY + offsetY + "px";
            el.style.bottom = "auto"; // prevent snapping back
          }
        });
      }

      // Enable drag on sectorTablePanel
      makeDraggable(document.getElementById("sectorTablePanel"));

      let coordLabelColor = "white";
      let coordsVisible = true;

      Object.entries(extraPoints).forEach(([name, [latDMS, lonDMS]]) => {
        const lat = convertDMSToDecimal(latDMS);
        const lon = convertDMSToDecimal(lonDMS);

        if (lat !== null && lon !== null) {
          const label = L.tooltip({
            permanent: true,
            direction: "top",
            offset: [7, -1],
            className: "coord-label",
          })
            .setLatLng([lat, lon])
            .setContent(name)
            .addTo(map);

          // Push to global list for toggle control
          extraLabelMarkers.push(label);
          setExtraLabelColor("white");

          // Wait until the element is rendered, then apply styles
          setTimeout(() => {
            const el = label.getElement();
            if (el) {
              el.style.color = coordLabelColor || "white";
              el.style.opacity = coordsVisible ? "1" : "0"; // ← Show/hide based on toggle state
            }
          }, 0);
        }
      });

      let drawnRouteLayers = [];

      function clearRouteLayers() {
        drawnRouteLayers.forEach((layer) => map.removeLayer(layer));
        drawnRouteLayers = [];
      }

      //-----------------------------
      function expandRouteWithAirwaySegments(routeSeq, airwaysDict) {
        const airwaySegments = [];
        const dctSegments = [];

        let i = 0;
        while (i < routeSeq.length) {
          const item = routeSeq[i];

          if (item === "DCT") {
            const from = routeSeq[i - 1];
            const to = routeSeq[i + 1];
            if (from && to) {
              dctSegments.push({ from, to });
            }
            i++;
            continue;
          }

          if (airwaysDict[item]) {
            const entry = routeSeq[i - 1];
            const exit = routeSeq[i + 1];
            const airway = airwaysDict[item];

            const s = airway.indexOf(entry);
            const e = airway.indexOf(exit);
            if (s !== -1 && e !== -1) {
              let path = airway.slice(Math.min(s, e), Math.max(s, e) + 1);
              if (s > e) path.reverse();
              airwaySegments.push({ points: path, airway: item });
            }
            i++;
          } else {
            i++;
          }
        }

        return { airwaySegments, dctSegments };
      }

      //----------------------------------------------
      function displayExpandedRouteByKey(routeKey) {
        const [from, to] = routeKey.split("-");

        // pass real parameters from route key (e.g. ORSAR-KUSEN-FRA)
        const routeSteps = routes[routeKey];

        if (!routeSteps) {
          alert("Route not found!");
          return;
        }

        // Inject into routeMap for reuse
        if (!routeMap[from]) routeMap[from] = {};
        routeMap[from][to] = routeSteps;

        displayExpandedRoute(from, to, routeKey);
      }

      function displayExpandedRouteByKey(routeKey) {
        const [from, to] = routeKey.split("-");
        const routeSteps = routes[routeKey];

        if (!routeSteps) {
          alert("Route not found!");
          return;
        }

        // Inject into routeMap for reuse
        if (!routeMap[from]) routeMap[from] = {};
        routeMap[from][to] = routeSteps;

        // Update existing route tooltip
        //document.getElementById("routeTooltip").textContent = `Route: ${routeSteps.join(" ")}`;

        // Expand the route for the new tooltip
        const expandedRoute = expandRoute(routeSteps, airways);
        document.getElementById(
          "expandedRouteTooltip"
        ).textContent = `${expandedRoute.join(" ")}`;

        // Call the original function to display the route
        displayExpandedRoute(from, to, routeKey);
      }

      //------------------------------------------
      function displayExpandedRoute(from, to, routeKey) {
        clearRouteLayers();
        const hoverSectorLayers = {};
        let temporarySectors = [];

        if (!routeMap[from] || !routeMap[from][to]) {
          alert("Route not found!");
          return;
        }

        const routeSteps = routeMap[from][to];
        document.getElementById(
          "routeTooltip"
        ).textContent = `${routeSteps.join(" → ")}`;

        const sectors = routeSectors[routeKey];
        const sectorText = sectors ? sectors.join(", ") : "—";
        document.getElementById(
          "sectorTooltip"
        ).textContent = `Sectors: ${sectorText}`;

        const sectorTooltip = document.getElementById("sectorTooltip");

        sectorTooltip.onmouseenter = () => {
          const sectors = routeSectors[routeKey];
          if (!sectors) return;

          sectors.forEach((code) => {
            if (!sectorPolygons[code] || sectorLayers[code]) return;

            const color = sectorColors[code] || "orange";
            const poly = L.polyline(sectorPolygons[code], {
              color: color,
              weight: 1.5,
              dashArray: "5 5",
              opacity: 0.8,
              fill: true,
              fillColor: color,
              fillOpacity: 0.2,
            }).addTo(map);

            sectorLayers[code] = poly;
            temporarySectors.push(code);
          });
        };

        sectorTooltip.onmouseleave = () => {
          temporarySectors.forEach((code) => {
            if (sectorLayers[code]) {
              map.removeLayer(sectorLayers[code]);
              delete sectorLayers[code];
            }
          });
          temporarySectors = [];
        };

        const { airwaySegments, dctSegments } = expandRouteWithAirwaySegments(
          routeSteps,
          airways
        );

        const airwayColorMap = {};
        let colorIndex = 0;

        airwaySegments.forEach(({ airway }) => {
          if (!airwayColorMap[airway]) {
            airwayColorMap[airway] =
              airwayColors[colorIndex++ % airwayColors.length];
          }
        });

        highlightAirwaysUsedInRoute(routeSteps, airwayColorMap);

        const latlngs = [];
        const drawnPoints = new Set();

        airwaySegments.forEach(({ points, airway }) => {
          const color = airwayColorMap[airway] || "yellow";

          for (let i = 0; i < points.length - 1; i++) {
            const name1 = points[i];
            const name2 = points[i + 1];

            const pt1 = extraPoints[name1];
            const pt2 = extraPoints[name2];
            if (!pt1 || !pt2) continue;

            const coords = [
              [convertDMSToDecimal(pt1[0]), convertDMSToDecimal(pt1[1])],
              [convertDMSToDecimal(pt2[0]), convertDMSToDecimal(pt2[1])],
            ];

            const line = L.polyline(coords, {
              opacity: 1,
              color,
              weight: 4,
            }).addTo(map);

            if (i === Math.floor((points.length - 1) / 2)) {
              const midLat = (coords[0][0] + coords[1][0]) / 2;
              const midLng = (coords[0][1] + coords[1][1]) / 2;

              const label = L.tooltip({
                permanent: true,
                direction: "center",
                className: "airway-label",
                offset: [0, 0],
                opacity: 3.5,
              })
                .setLatLng([midLat, midLng])
                .setContent(`<span style=font-weight:bold;">${airway}</span>`)
                .addTo(map);

              drawnRouteLayers.push(label);
            }

            drawnRouteLayers.push(line);

            if (!drawnPoints.has(name1)) {
              latlngs.push(coords[0]);
              drawnPoints.add(name1);
            }
            latlngs.push(coords[1]);
            drawnPoints.add(name2);
          }
        });

        dctSegments.forEach(({ from, to }) => {
          const pt1 = extraPoints[from];
          const pt2 = extraPoints[to];
          if (!pt1 || !pt2) return;

          const coords = [
            [convertDMSToDecimal(pt1[0]), convertDMSToDecimal(pt1[1])],
            [convertDMSToDecimal(pt2[0]), convertDMSToDecimal(pt2[1])],
          ];

          const line = L.polyline(coords, {
            color: "#CBCBCB", //"#598",
            weight: 4,
          }).addTo(map);

          drawnRouteLayers.push(line);

          latlngs.push(coords[0]);
          latlngs.push(coords[1]);
        });

        if (latlngs.length > 1) {
          const bounds = L.latLngBounds(latlngs);
          map.fitBounds(bounds, {
            padding: [100, 100],
            maxZoom: 9,
          });
        }

        // Always show arrow/circle at last point in routeSteps-----------

        const lastPointName = routeSteps[routeSteps.length - 1];
        const lastPoint = extraPoints[lastPointName];

        if (lastPoint) {
          const lastCoord = [
            convertDMSToDecimal(lastPoint[0]),
            convertDMSToDecimal(lastPoint[1]),
          ];

          const arrow = L.divIcon({
            className: "arrow-head",
            iconSize: [11, 11],
            iconAnchor: [8, 8],
            html: `<div></div>`,
          });

          const arrowMarker = L.marker(lastCoord, { icon: arrow }).addTo(map);
          drawnRouteLayers.push(arrowMarker);
        }

        // Remove old remarks div if present
        let oldDiv = document.getElementById("remarksOverlay");
        if (oldDiv) {
          oldDiv.remove();
        }

        // --- Show CFL/XFL/Remarks tooltips if defined -----------------
        if (CFL_XFL[routeKey]) {
          const { CFL, XFL, REMARKS } = CFL_XFL[routeKey];

          // Beginning of route
          const firstPoint = extraPoints[routeSteps[0]];
          if (firstPoint && CFL) {
            const coord = [
              convertDMSToDecimal(firstPoint[0]),
              convertDMSToDecimal(firstPoint[1]),
            ];
            const cflTip = L.tooltip({
              permanent: true,
              direction: "top",
              offset: [0, -30],
              className: "route-extra-label",
            })
              .setLatLng(coord)
              .setContent(`CFL: ${CFL}`)
              .addTo(map);
            drawnRouteLayers.push(cflTip);
          }

          // End of route
          const lastPoint = extraPoints[routeSteps.at(-1)];
          if (lastPoint && XFL) {
            const coord = [
              convertDMSToDecimal(lastPoint[0]),
              convertDMSToDecimal(lastPoint[1]),
            ];
            const xflTip = L.tooltip({
              permanent: true,
              direction: "top",
              offset: [0, -30],
              className: "route-extra-label",
            })
              .setLatLng(coord)
              .setContent(`XFL: ${XFL}`)
              .addTo(map);
            drawnRouteLayers.push(xflTip);
          }

          if (REMARKS) {
            // Create new overlay
            const div = document.createElement("div");
            div.id = "remarksOverlay";

            div.innerHTML = `* ${REMARKS}`;

            // Append to map container
            map.getContainer().appendChild(div);

            // Track it for cleanup with the route
            drawnRouteLayers.push({
              remove: () => div.remove(),
            });
          }
        }
      }

      let highlightedAirwayLayers = [];

      //-----------------------------------------------------
      function highlightAirwaysUsedInRoute(routeSteps, airwayColorMap) {
        // Clear old highlights
        highlightedAirwayLayers.forEach((layer) => map.removeLayer(layer));
        highlightedAirwayLayers = [];

        const usedAirways = routeSteps.filter((step) => airways[step]);

        usedAirways.forEach((airwayName) => {
          const points = airways[airwayName];

          const latlngs = points
            .map((name) => {
              const pt = extraPoints[name];
              if (pt) {
                return [convertDMSToDecimal(pt[0]), convertDMSToDecimal(pt[1])];
              }
              return null;
            })
            .filter(Boolean);

          if (latlngs.length >= 2) {
            const color = airwayColorMap[airwayName] || "white";

            const line = L.polyline(latlngs, {
              color,
              weight: 2.5,
              dashArray: "2 10",
              opacity: 0.7,
            }).addTo(map);

            highlightedAirwayLayers.push(line);
          }
        });

        document.getElementById("resetViewBtn").onclick = () => {
          location.reload();
        };
      }

      //--select hi/low grouped sector----------------------------------------------

      function toggleSectorGroup(group, checked) {
        group.forEach((code) => {
          const checkbox = document.querySelector(
            `#sectorOptions input[value="${code}"]`
          );
          if (checkbox) {
            checkbox.checked = checked;
            checkbox.dispatchEvent(new Event("change"));
          }
        });
      }

      //-----------------------------------------

      window.onload = function () {
        // Handle dynamic sector toggling
        document
          .querySelectorAll('#sectorOptions input[type="checkbox"]')
          .forEach((cb) => {
            cb.addEventListener("change", populateRouteButtons);
          });

        const activeSectorCodes = new Set(); // 🔹 Track which sectors are active
        const showColorsCheckbox = document.getElementById("showSectorColors");

        showColorsCheckbox.addEventListener("change", () => {
          Object.keys(sectorLayers).forEach((code) => {
            if (sectorLayers[code].polygon)
              map.removeLayer(sectorLayers[code].polygon);
            if (sectorLayers[code].label)
              map.removeLayer(sectorLayers[code].label);
            delete sectorLayers[code];
          });

          if (showColorsCheckbox.checked) {
            activeSectorCodes.forEach((code) => {
              if (sectorPolygons[code]) {
                const color = sectorColors[code] || "white";
                const polygon = L.polygon(sectorPolygons[code], {
                  color,
                  weight: 1.5,
                  dashArray: "3 6",
                  fillColor: color,
                  fillOpacity: 0.2,
                  opacity: 0.9,
                }).addTo(map);

                // Calculate simple centroid (average of coordinates)
                let sumLat = 0,
                  sumLng = 0;
                sectorPolygons[code].forEach(([lat, lng]) => {
                  sumLat += lat;
                  sumLng += lng;
                });
                const centerLat = sumLat / sectorPolygons[code].length;
                const centerLng = sumLng / sectorPolygons[code].length;

                // Add label at center
                const label = L.tooltip({
                  permanent: true,
                  direction: "center",
                  className: "sector-label",
                  offset: [0, 0],
                })
                  .setLatLng([centerLat, centerLng])
                  .setContent(code)
                  .addTo(map);

                sectorLayers[code] = { polygon, label };
              }
            });
          }
        });

        document
          .querySelectorAll(
            '#sectorOptions input[type="checkbox"]:not(#showSectorColors)'
          )
          .forEach((cb) => {
            cb.addEventListener("change", () => {
              const code = cb.value;

              if (cb.checked) {
                activeSectorCodes.add(code);
                if (
                  showColorsCheckbox.checked &&
                  sectorPolygons[code] &&
                  !sectorLayers[code]
                ) {
                  const color = sectorColors[code] || "white";
                  const polygon = L.polygon(sectorPolygons[code], {
                    color,
                    weight: 1.5,
                    dashArray: "3 6",
                    fillColor: color,
                    fillOpacity: 0.2,
                    opacity: 0.9,
                  }).addTo(map);

                  // Calculate simple centroid (average of coordinates)
                  let sumLat = 0,
                    sumLng = 0;
                  sectorPolygons[code].forEach(([lat, lng]) => {
                    sumLat += lat;
                    sumLng += lng;
                  });
                  const centerLat = sumLat / sectorPolygons[code].length;
                  const centerLng = sumLng / sectorPolygons[code].length;

                  // Add label at center
                  const label = L.tooltip({
                    permanent: true,
                    direction: "center",
                    className: "sector-label",
                    offset: [0, 0],
                  })
                    .setLatLng([centerLat, centerLng])
                    .setContent(code)
                    .addTo(map);

                  sectorLayers[code] = { polygon, label };
                }
              } else {
                activeSectorCodes.delete(code);
                if (sectorLayers[code]) {
                  if (sectorLayers[code].polygon)
                    map.removeLayer(sectorLayers[code].polygon);
                  if (sectorLayers[code].label)
                    map.removeLayer(sectorLayers[code].label);
                  delete sectorLayers[code];
                }
              }
            });
          });

        let coordsVisible = true;

        document
          .getElementById("toggleWaypointsBtn")
          .addEventListener("click", function () {
            coordsVisible = !coordsVisible;

            extraLabelMarkers.forEach((label) => {
              const el = label.getElement();
              if (el) {
                el.style.opacity = coordsVisible ? "1" : "0";
              }
            });

            this.textContent = coordsVisible ? "Names: ON" : "Names: OFF";
          });

        // High group toggle-------------------
        document
          .getElementById("selectHighSectors")
          .addEventListener("change", function () {
            toggleSectorGroup(highSectors, this.checked);
          });

        // Low group toggle--------------------
        document
          .getElementById("selectLowSectors")
          .addEventListener("change", function () {
            toggleSectorGroup(lowSectors, this.checked);
          });

        filterRoutes("Arr"); // Default load
        renderTriangles();
        drawairways();
        map.on("zoomend", renderTriangles);
        map.fitBounds(polyline.getBounds());
      };
    </script>
  </body>
</html>
